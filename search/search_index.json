{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"SpikeGLX Download Page Synchronized acquisition from imec neural probes and NI-DAQ devices. Get compiled apps, support and help stuff on this page. See what's new on the site here . The source code repo is here . This site supports prototype and currently shipping commercial products. The latest commercial PXI-based components are: Hardware: Neuropixels 1.0 probes (also called phase3B2). Software: SpikeGLX 3.0 (also called phase30). What Is SpikeGLX? SpikeGLX is a recording system for extracellular neural probes. The emphasis is on concurrent synchronous recording from high channel count probes together with numerous auxiliary analog and digital channels: Concurrent, synchronized acquisition from imec probes, Oneboxes and NI-DAQ devices. Supports all Neuropixels probe generations and types. Supports HHMI/Whisper system. Flexible visualization, filtering and sorting tools. Programmable triggering. Remote control and extensibility via C++ or MATLAB. Powerful offline viewing and editing. System Requirements (What to Buy) Requirements differ according to platform: For PXI-based setups . For all earlier setups . Important!: The enclustra drivers required for PXI do not work with AMD-based computers. The PXI-based imec hardware can only run on computers using Intel CPUs and chipsets. Important!: Older imec modules (shipped before Q2 2023) are programmed to work only in X4 and higher chassis slots. Learn more about this issue on the site's Firmware tab . Latest Application Downloads SpikeGLX 3.0 (PXI, all probe types later than 3A) : Latest release highlights: Replaces all previous releases. Supports all probes. Does whole probe activity surveys. Has cool graphical site selection tools. Supports the (now separate) MATLAB and C++ remote SDKs. Has many GUI enhancements and better help. Important: Please read the README file for instructions regarding imec firmware versions. Release 20231207-phase30 ... Readme : NP1016, imec v3.62.1 Xilinx Kintex versions not covered by 3.0 : Release 20190724-phase3B1 ... Readme : Minor bug fixes, imec v5.1 Release 20190724-phase3A ... Readme : Minor bug fixes, imec v4.3 Suggested organization: Create folder 'SpikeGLX' on your desktop or C:\\ then download/unzip associated stuff into it. It's fine to have several versions there as long as you run one at a time: SpikeGLX\\ Release_v20231207-phase30.zip Release_v20200520-phase3B2.zip Release_v20231207-phase30\\ Release_v20200520-phase3B2\\ Drivers\\ Enclustra_Windows_10&11\\ Tools\\ Etc.\\ PXI Enclustra Drivers These required driver files are not included in your SpikeGLX release. Click the link below for your Windows OS version. Unzip the folder into your local folder of SpikeGLX-related stuff. Follow the installation ReadMe in the download. Terminology: 'Enclustra' is a company that markets other vendor's FPGAs along with development and support tools. There are several FPGAs used in the Neuropixels hardware, including a Xilinx Zynq model, often referred to as 'the enclustra'. Windows 7 & 8 Windows 10 & 11 Important!: The enclustra drivers required for PXI do not work with AMD-based computers. The PXI-based imec hardware can only run on computers using Intel CPUs and chipsets. Remote Control/Scripting SDK Note: SDK = Software Development Kit API = Application Programming Interface SpikeGLX can be driven in real time by your own remote Windows or Linux application. The API uses the TCP/IP protocol. Your custom application can run on a separate computer (on the same network as SpikeGLX) or on the same computer. The API allows you to: Set/get parameters. Start/stop runs. Fetch data with low latency (<4 ms on same computer). Do many things you can do from the SpikeGLX GUI. There are two SDKs: SpikeGLX-MATLAB-SDK : For MATLAB programs. SpikeGLX-CPP-SDK : For C++, C, C#, Python. Get these at the source code repo here . HelloSGLX (Windows) The above SDKs are full featured and support developers writing in MATLAB, C++, C, C# and Python. If you are writing in anything else, you can use HelloSGLX instead. This is a command-line application that stands in between your script and SpikeGLX. For each command or query, your script uses its shell commands to launch HelloSGLX as a separate process. This is too slow for real-time data interaction, but still supports easy integration of SpikeGLX into an automated workflow. You can get/set run parameters and start/stop runs and file writing. Get it here . Note that all of these SDKs require SpikeGLX 20220101 or later. Command-line Tool Installation CatGT TPrime NIScaler C_Waves OverStrike These come as zip files. To install one: Extract the contained folder to any destination you like. Keep the folder contents together, as you do with the SpikeGLX folder. Read the contained ReadMe.txt for instructions. Look at the runit.bat example batch script. CatGT CatGT is a command-line tool that does the following offline operations on SpikeGLX output files (all probe types): Optionally join trials with given run_name and index ranges [ga,gb] [ta,tb]... ...Or run on any individual file. Optionally apply demultiplexing corrections. Optionally apply band-pass and CAR filters. Optionally edit out saturation artifacts. By default extract tables of sync waveform edge times to drive TPrime. Optionally extract tables of other nonneural event times to be aligned with spikes. Optionally join the above outputs across different runs (supercat feature). CatGT: Tshift, CAR, Gfix CatGT 4.3 (Windows) CatGT 4.3 (Linux) TPrime TPrime is a command-line tool that maps event times (all probe types): Map time from one SpikeGLX data stream to any other. Translate all events to a single common timeline. Uses sync edges to achieve 1 to 2 sample accuracy. Maps TTL events extracted using CatGT. Maps spike times from any sorter. Sync: Aligning with Edges. TPrime 1.8 (Windows) TPrime 1.8 (Linux) Post-processing Tools NIScaler command-line tool to calibrate/rescale NI analog voltages acquired with SpikeGLX versions earlier than 20220101. SpikeGLX versions 20220101 and later automatically acquire scaled data. Note: Only the Windows NIScaler tool can scan NI hardware and create calibration files. Both tools can apply calibration files to existing runs. Measured correction size: {6133=0%, 6363=5%, 6341=7%}. NIScaler 1.1 (Windows) NIScaler 1.1 (Linux) MATLAB and Python tools for parsing SpikeGLX meta and binary datafiles (supports 3A, 3B1, 3B2, 20). SpikeGLX_Datafile_Tools MATLAB and Python tools that augment SpikeGLX metadata: Generates channel map files needed by Kilosort and JRClust (all SpikeGLX versions). Makes SpikeGLX data compatible with SpikeInterface (needed for versions prior to 20230326). Works for all probe types. SGLXMetaToCoords Average cluster waveforms and statistics command-line tool. This can be run separately like CatGT or used with ecephys_spike_sorting . C_Waves 2.6 (Windows) C_Waves 2.6 (Linux) Jennifer Colonell's version of the Allen Institute ecephys_spike_sorting pipeline. This Python script-driven pipeline chains together: CatGT, KS2, Noise Cluster Tagging, C_Waves, QC metrics, TPrime. ecephys_spike_sorting Overwrite nasty parts of your binary data with zeros using OverStrike. This helps remove artifacts that are too tricky for CatGT. OverStrike 1.0 (Windows) OverStrike 1.0 (Linux) Interesting Map Files Tetrodes Bank Selection 3B (tetrodes covering banks zero and one) Long Column Bank Selection 3B (one column through banks zero and one) Related help: IMRO Table Anatomy Metadata Guides Descriptions of metafile items for each phase: Metadata_30 Metadata_20 Metadata_3B2 (NP 1.0) Metadata_3B1 Metadata_3A Questions or Problems? 1) For general How-To questions please consult the help documents and videos on this site, or pose your question to the Neuropixels slack channel so everyone can learn together. 2) If the community can't help, try emailing me directly. I'm also happy to hear about new feature requests, and very eager to hear about suspected bugs. This is the best way to let me know there's a possible issue without causing alarm in the whole community. You can get my email from the About Box in the SpikeGLX application. 3) As a last resort you can register your observations of serious bugs/mistakes/errors using the SpikeGLX issue list on GitHub. Help Neuropixels Slack Channel Neuropixels Support Page Noise: Learn How To Solder Sharpening Apparatus (MS.Word.docx) Installing NI Drivers SpikeGLX UserManual SpikeGLX QuickRef (MS.PowerPoint) SpikeGLX FAQ CatGT: Tshift, CAR, Gfix Sync: Aligning with Edges Parsing Data Files IMRO Table Anatomy How-to Videos Handle & Solder Sharpen Probe Install Software First Run Sync Graphical Probe IMRO Editor Whole-Probe Activity Survey Licensing Use is subject to Janelia Research Campus Software Copyright 1.2 license terms: http://license.janelia.org/license . QLed components are subject to GNU Library GPL v2.0 terms, which are described here: https://github.com/billkarsh/SpikeGLX/blob/master/QLed-LGPLv2-LICENSE.txt . fin","title":"Home"},{"location":"#spikeglx-download-page","text":"Synchronized acquisition from imec neural probes and NI-DAQ devices. Get compiled apps, support and help stuff on this page. See what's new on the site here . The source code repo is here . This site supports prototype and currently shipping commercial products. The latest commercial PXI-based components are: Hardware: Neuropixels 1.0 probes (also called phase3B2). Software: SpikeGLX 3.0 (also called phase30).","title":"SpikeGLX Download Page"},{"location":"#what-is-spikeglx","text":"SpikeGLX is a recording system for extracellular neural probes. The emphasis is on concurrent synchronous recording from high channel count probes together with numerous auxiliary analog and digital channels: Concurrent, synchronized acquisition from imec probes, Oneboxes and NI-DAQ devices. Supports all Neuropixels probe generations and types. Supports HHMI/Whisper system. Flexible visualization, filtering and sorting tools. Programmable triggering. Remote control and extensibility via C++ or MATLAB. Powerful offline viewing and editing.","title":"What Is SpikeGLX?"},{"location":"#system-requirements","text":"(What to Buy) Requirements differ according to platform: For PXI-based setups . For all earlier setups . Important!: The enclustra drivers required for PXI do not work with AMD-based computers. The PXI-based imec hardware can only run on computers using Intel CPUs and chipsets. Important!: Older imec modules (shipped before Q2 2023) are programmed to work only in X4 and higher chassis slots. Learn more about this issue on the site's Firmware tab .","title":"System Requirements"},{"location":"#latest-application-downloads","text":"SpikeGLX 3.0 (PXI, all probe types later than 3A) : Latest release highlights: Replaces all previous releases. Supports all probes. Does whole probe activity surveys. Has cool graphical site selection tools. Supports the (now separate) MATLAB and C++ remote SDKs. Has many GUI enhancements and better help. Important: Please read the README file for instructions regarding imec firmware versions. Release 20231207-phase30 ... Readme : NP1016, imec v3.62.1 Xilinx Kintex versions not covered by 3.0 : Release 20190724-phase3B1 ... Readme : Minor bug fixes, imec v5.1 Release 20190724-phase3A ... Readme : Minor bug fixes, imec v4.3 Suggested organization: Create folder 'SpikeGLX' on your desktop or C:\\ then download/unzip associated stuff into it. It's fine to have several versions there as long as you run one at a time: SpikeGLX\\ Release_v20231207-phase30.zip Release_v20200520-phase3B2.zip Release_v20231207-phase30\\ Release_v20200520-phase3B2\\ Drivers\\ Enclustra_Windows_10&11\\ Tools\\ Etc.\\","title":"Latest Application Downloads"},{"location":"#pxi-enclustra-drivers","text":"These required driver files are not included in your SpikeGLX release. Click the link below for your Windows OS version. Unzip the folder into your local folder of SpikeGLX-related stuff. Follow the installation ReadMe in the download. Terminology: 'Enclustra' is a company that markets other vendor's FPGAs along with development and support tools. There are several FPGAs used in the Neuropixels hardware, including a Xilinx Zynq model, often referred to as 'the enclustra'. Windows 7 & 8 Windows 10 & 11 Important!: The enclustra drivers required for PXI do not work with AMD-based computers. The PXI-based imec hardware can only run on computers using Intel CPUs and chipsets.","title":"PXI Enclustra Drivers"},{"location":"#remote-controlscripting-sdk","text":"Note: SDK = Software Development Kit API = Application Programming Interface SpikeGLX can be driven in real time by your own remote Windows or Linux application. The API uses the TCP/IP protocol. Your custom application can run on a separate computer (on the same network as SpikeGLX) or on the same computer. The API allows you to: Set/get parameters. Start/stop runs. Fetch data with low latency (<4 ms on same computer). Do many things you can do from the SpikeGLX GUI. There are two SDKs: SpikeGLX-MATLAB-SDK : For MATLAB programs. SpikeGLX-CPP-SDK : For C++, C, C#, Python. Get these at the source code repo here .","title":"Remote Control/Scripting SDK"},{"location":"#hellosglx-windows","text":"The above SDKs are full featured and support developers writing in MATLAB, C++, C, C# and Python. If you are writing in anything else, you can use HelloSGLX instead. This is a command-line application that stands in between your script and SpikeGLX. For each command or query, your script uses its shell commands to launch HelloSGLX as a separate process. This is too slow for real-time data interaction, but still supports easy integration of SpikeGLX into an automated workflow. You can get/set run parameters and start/stop runs and file writing. Get it here . Note that all of these SDKs require SpikeGLX 20220101 or later.","title":"HelloSGLX (Windows)"},{"location":"#command-line-tool-installation","text":"CatGT TPrime NIScaler C_Waves OverStrike These come as zip files. To install one: Extract the contained folder to any destination you like. Keep the folder contents together, as you do with the SpikeGLX folder. Read the contained ReadMe.txt for instructions. Look at the runit.bat example batch script.","title":"Command-line Tool Installation"},{"location":"#catgt","text":"CatGT is a command-line tool that does the following offline operations on SpikeGLX output files (all probe types): Optionally join trials with given run_name and index ranges [ga,gb] [ta,tb]... ...Or run on any individual file. Optionally apply demultiplexing corrections. Optionally apply band-pass and CAR filters. Optionally edit out saturation artifacts. By default extract tables of sync waveform edge times to drive TPrime. Optionally extract tables of other nonneural event times to be aligned with spikes. Optionally join the above outputs across different runs (supercat feature). CatGT: Tshift, CAR, Gfix CatGT 4.3 (Windows) CatGT 4.3 (Linux)","title":"CatGT"},{"location":"#tprime","text":"TPrime is a command-line tool that maps event times (all probe types): Map time from one SpikeGLX data stream to any other. Translate all events to a single common timeline. Uses sync edges to achieve 1 to 2 sample accuracy. Maps TTL events extracted using CatGT. Maps spike times from any sorter. Sync: Aligning with Edges. TPrime 1.8 (Windows) TPrime 1.8 (Linux)","title":"TPrime"},{"location":"#post-processing-tools","text":"NIScaler command-line tool to calibrate/rescale NI analog voltages acquired with SpikeGLX versions earlier than 20220101. SpikeGLX versions 20220101 and later automatically acquire scaled data. Note: Only the Windows NIScaler tool can scan NI hardware and create calibration files. Both tools can apply calibration files to existing runs. Measured correction size: {6133=0%, 6363=5%, 6341=7%}. NIScaler 1.1 (Windows) NIScaler 1.1 (Linux) MATLAB and Python tools for parsing SpikeGLX meta and binary datafiles (supports 3A, 3B1, 3B2, 20). SpikeGLX_Datafile_Tools MATLAB and Python tools that augment SpikeGLX metadata: Generates channel map files needed by Kilosort and JRClust (all SpikeGLX versions). Makes SpikeGLX data compatible with SpikeInterface (needed for versions prior to 20230326). Works for all probe types. SGLXMetaToCoords Average cluster waveforms and statistics command-line tool. This can be run separately like CatGT or used with ecephys_spike_sorting . C_Waves 2.6 (Windows) C_Waves 2.6 (Linux) Jennifer Colonell's version of the Allen Institute ecephys_spike_sorting pipeline. This Python script-driven pipeline chains together: CatGT, KS2, Noise Cluster Tagging, C_Waves, QC metrics, TPrime. ecephys_spike_sorting Overwrite nasty parts of your binary data with zeros using OverStrike. This helps remove artifacts that are too tricky for CatGT. OverStrike 1.0 (Windows) OverStrike 1.0 (Linux)","title":"Post-processing Tools"},{"location":"#interesting-map-files","text":"Tetrodes Bank Selection 3B (tetrodes covering banks zero and one) Long Column Bank Selection 3B (one column through banks zero and one) Related help: IMRO Table Anatomy","title":"Interesting Map Files"},{"location":"#metadata-guides","text":"Descriptions of metafile items for each phase: Metadata_30 Metadata_20 Metadata_3B2 (NP 1.0) Metadata_3B1 Metadata_3A","title":"Metadata Guides"},{"location":"#questions-or-problems","text":"1) For general How-To questions please consult the help documents and videos on this site, or pose your question to the Neuropixels slack channel so everyone can learn together. 2) If the community can't help, try emailing me directly. I'm also happy to hear about new feature requests, and very eager to hear about suspected bugs. This is the best way to let me know there's a possible issue without causing alarm in the whole community. You can get my email from the About Box in the SpikeGLX application. 3) As a last resort you can register your observations of serious bugs/mistakes/errors using the SpikeGLX issue list on GitHub.","title":"Questions or Problems?"},{"location":"#help","text":"Neuropixels Slack Channel Neuropixels Support Page Noise: Learn How To Solder Sharpening Apparatus (MS.Word.docx) Installing NI Drivers SpikeGLX UserManual SpikeGLX QuickRef (MS.PowerPoint) SpikeGLX FAQ CatGT: Tshift, CAR, Gfix Sync: Aligning with Edges Parsing Data Files IMRO Table Anatomy","title":"Help"},{"location":"#how-to-videos","text":"Handle & Solder Sharpen Probe Install Software First Run Sync Graphical Probe IMRO Editor Whole-Probe Activity Survey","title":"How-to Videos"},{"location":"#licensing","text":"Use is subject to Janelia Research Campus Software Copyright 1.2 license terms: http://license.janelia.org/license . QLed components are subject to GNU Library GPL v2.0 terms, which are described here: https://github.com/billkarsh/SpikeGLX/blob/master/QLed-LGPLv2-LICENSE.txt . fin","title":"Licensing"},{"location":"firmware/","text":"Firmware FIX: Imec Module Doesn't Work In My Chassis You've powered everything off as instructed, installed your imec basestation module into a chassis slot and powered everything on again. You get a red module status light; the module isn't recognized at all... It could be a 1-lane ( X1 ) slot. In February 2022 we've encountered the fact that not all PXIe chassis slots are the same with respect to bandwidth. They come in X1, X2, X4, X8, X16, X32. X1 is sufficient for up to 250 MB/s, which is completely adequate for an imec module. However, imec originally designed the module firmware for X4 and higher slots. Modules have two copies of the firmware. The normal/working copy is loaded, unless you power-up with the ISP button depressed, in which case the boot image is loaded. Note the boot image is a backup copy in case the working copy is corrupted. In roughly Q2 2022, imec began shipping modules with an X1-compatible working image, but not an X1-compatible golden image. By Q2 2023, both images were X1-compatible. What if you have an older module and a newer NI chassis, for example, a 1083 with five (X1) slots, a 1088 with five (X1) and three (X4) slots, or a Keysight M9005A that has only X1 slots? There's a firmware solution to fix the issue, but note the following: You have to upgrade to a phase30 release; get the latest. To update the module firmware for X1 compatibility, you first have to install it into an X4 or higher slot so you can talk to it... Check if your chassis design includes at least some X4+ slots. It can be truly difficult to find that out. NI doesn't mention anything about that in most chassis 'Datasheets' or 'Specifications.' Rather, it's in the 'User Guide' for some models. If you don't have any X4+ slots, maybe a neighbor lab can let you reprogram a module in their chassis. The NI 1088 is a popular NI choice; the X1 slots are {2,3,5,7,9}, the X4 slots are {4,6,8}. PXI Module Firmware A module can only run one flavor of SpikeGLX at a time because it can only contain firmware of one flavor at a time. To run SpikeGLX-phase3B2 the hardware module must contain Neuropixels 1.0 (phase3B2) firmware. To run SpikeGLX-phase20 the module must contain Neuropixels 2.0 firmware. Likewise for the newest SpikeGLX-phase30. You can always change the firmware, either to get the latest bug fixes, or to switch SpikeGLX flavors. Download the desired package (below) and unzip it to your hard drive. Note that each package contains two files, one for the FPGA on the basestation (BS) and one for the FPGA on the basestation connect card (BSC). The filenames contain either 'BS' or 'BSC' so you can tell them apart. Run SpikeGLX and select menu item Tools/Update imec Firmware . Click the ? button in the dialog titlebar to get further help. Regardless of the currently installed firmware, we recommend that you do ANY update using the latest SpikeGLX Phase30 application because that updater works reliably. Yes, even if for example, you are currently at Phase20 firmware and want to drop back to Phase3B2, we still advise you to run Phase30 software, select Tools/Update imec Firmware , then power everything down. After rebooting, run the SpikeGLX application that pairs with the newly loaded firmware. Neuropixels 3.0 (Phase30) Firmware Neuropixels 2.0 (Phase20) Firmware Neuropixels 1.0 (Phase3B2) Firmware fin","title":"Firmware"},{"location":"firmware/#firmware","text":"","title":"Firmware"},{"location":"firmware/#fix-imec-module-doesnt-work-in-my-chassis","text":"You've powered everything off as instructed, installed your imec basestation module into a chassis slot and powered everything on again. You get a red module status light; the module isn't recognized at all... It could be a 1-lane ( X1 ) slot. In February 2022 we've encountered the fact that not all PXIe chassis slots are the same with respect to bandwidth. They come in X1, X2, X4, X8, X16, X32. X1 is sufficient for up to 250 MB/s, which is completely adequate for an imec module. However, imec originally designed the module firmware for X4 and higher slots. Modules have two copies of the firmware. The normal/working copy is loaded, unless you power-up with the ISP button depressed, in which case the boot image is loaded. Note the boot image is a backup copy in case the working copy is corrupted. In roughly Q2 2022, imec began shipping modules with an X1-compatible working image, but not an X1-compatible golden image. By Q2 2023, both images were X1-compatible. What if you have an older module and a newer NI chassis, for example, a 1083 with five (X1) slots, a 1088 with five (X1) and three (X4) slots, or a Keysight M9005A that has only X1 slots? There's a firmware solution to fix the issue, but note the following: You have to upgrade to a phase30 release; get the latest. To update the module firmware for X1 compatibility, you first have to install it into an X4 or higher slot so you can talk to it... Check if your chassis design includes at least some X4+ slots. It can be truly difficult to find that out. NI doesn't mention anything about that in most chassis 'Datasheets' or 'Specifications.' Rather, it's in the 'User Guide' for some models. If you don't have any X4+ slots, maybe a neighbor lab can let you reprogram a module in their chassis. The NI 1088 is a popular NI choice; the X1 slots are {2,3,5,7,9}, the X4 slots are {4,6,8}.","title":"FIX: Imec Module Doesn't Work In My Chassis"},{"location":"firmware/#pxi-module-firmware","text":"A module can only run one flavor of SpikeGLX at a time because it can only contain firmware of one flavor at a time. To run SpikeGLX-phase3B2 the hardware module must contain Neuropixels 1.0 (phase3B2) firmware. To run SpikeGLX-phase20 the module must contain Neuropixels 2.0 firmware. Likewise for the newest SpikeGLX-phase30. You can always change the firmware, either to get the latest bug fixes, or to switch SpikeGLX flavors. Download the desired package (below) and unzip it to your hard drive. Note that each package contains two files, one for the FPGA on the basestation (BS) and one for the FPGA on the basestation connect card (BSC). The filenames contain either 'BS' or 'BSC' so you can tell them apart. Run SpikeGLX and select menu item Tools/Update imec Firmware . Click the ? button in the dialog titlebar to get further help. Regardless of the currently installed firmware, we recommend that you do ANY update using the latest SpikeGLX Phase30 application because that updater works reliably. Yes, even if for example, you are currently at Phase20 firmware and want to drop back to Phase3B2, we still advise you to run Phase30 software, select Tools/Update imec Firmware , then power everything down. After rebooting, run the SpikeGLX application that pairs with the newly loaded firmware. Neuropixels 3.0 (Phase30) Firmware Neuropixels 2.0 (Phase20) Firmware Neuropixels 1.0 (Phase3B2) Firmware fin","title":"PXI Module Firmware"},{"location":"legacy/","text":"History / Older versions Imec Project Phases This site supports prototype and currently shipping commercial products. The latest commercial PXI-based components are: Hardware: Neuropixels 1.0 probes (also called phase3B2). Software: SpikeGLX 3.0 (also called phase30). There are five branches in this repo separately supporting the five Imec Neuropixels project development phases. The five phases have mutually incompatible hardware and software, so obtain the appropriate materials for your needs. Release software packages are labeled as phase3A, phase3B1, phase3B2, phase20, or phase30. All early releases having no phase label are actually phase3A. All releases support NI-DAQ based acquisition. Phase3A : Initially, 4 flavors of prototype probe (option 1, 2, 3, 4) were created enabling consortium members to choose the most useful architecture and feature set. Phase3A probes are connected one at a time to a Xilinx Kintex 7 FPGA board, and accessed via Ethernet. The probes, cables, HS and BSC parts are specific to phase3A. Phase3B1 : At this phase, option 3 probes had won and were further developed for commercial production. The same Xilinx board is retained for one at a time probe operation over Ethernet (but reprogrammed for 3B1). The cables, HS and BSC parts are all specific to 3B1. The 3B probes can be run with either 3B1 or 3B2 setups. Phase3B2 : A.k.a. Neuropixels 1.0. This phase replaces the Xilinx board with PXIe based modules, each of which connects up to 4 probes. Several modules can be operated together from one PXI chassis and one application. The probes are the same as phase3B1, but all other hardware parts are specific to the PXIe implementation. Phase20 : A.k.a. Neuropixels 2.0, introduces specific probes and HS with a more compact design. The HS each support two probes. The same PXIe modules can be used with a firmware update. SpikeGLX for this phase is specific to 2.0 hardware. Phase30 : This is unified software to support Neuropixels 1.0, 2.0 and all other probe hardware going forward. Again, the same base station modules can be used after updating their firmware, which can be done via SpikeGLX. Older Versions 30 : Release 20230905-phase30 ... Readme : Spike Viewer, bug fixes, imec v3.62 Release 20230815-phase30 ... Readme : NP2014, low latency mode, imec v3.62 Release 20230425-phase30 ... Readme : Anatomy data, better SNR, imec v3.60 Release 20230411-phase30 ... Readme : 2.0 probes, Fix PH2B headstage, imec v3.60 Release 20230323-phase30 ... Readme : Realistic geometry, ~snsGeomMap, Imec v3.57 Release 20230120-phase30 ... Readme : Fix TTL trigger, add UHD3 probes, Imec v3.57 Release 20221212-phase30 ... Readme : Fix sync SMA input, Imec v3.52 Release 20221012-phase30 ... Readme : Fix HS detection issue in 20220101, Imec v3.52 Release 20201103-phase30 ... Readme : Fix firmware update dialog, Imec v3.31 20 : Release 20200309-phase20 ... Readme : Multidrive output, Imec v2.11 3B2 (NP 1.0) : Release 20200520-phase3B2 ... Readme : Supports UHD-1, NHP, Imec v1.20 Release 20200309-phase3B2 ... Readme : Multidrive output, Imec v1.20 Release 20190724-phase3B2 ... Readme : Minor bug fixes, Imec v1.20 Release 20190413-phase3B2 ... Readme : Flexible bank selection, Imec v1.20 Release 20190327-phase3B2 ... Readme : Fix names with dots, Imec v1.15 3B1 : Release 20190413-phase3B1 ... Readme : Flexible bank selection, Imec v5.1 Release 20190327-phase3B1 ... Readme : Fix names with dots, Imec v5.1 Release 20190305-phase3B1 ... Readme : 32 NI channels, Imec v5.1 Release 20190214-phase3B1 ... Readme : Run folders, Imec v5.1 Release 20180829-phase3B1 ... Readme : Fix TTL trigger, Imec v5.1 Release 20180515-phase3B1 ... Readme : Fix FileViewer, Imec v5.1 Release 20180325-phase3B1 ... Readme : Fixed-up 3B1, Imec v5.1 3A : Release 20190413-phase3A ... Readme : Flexible bank selection, Imec v4.3 Release 20190327-phase3A ... Readme : Fix names with dots, Imec v4.3 Release 20190305-phase3A ... Readme : 32 NI channels, Imec v4.3 Release 20190214-phase3A ... Readme : Run folders, Imec v4.3 Release 20180829-phase3A ... Readme : Fix TTL trigger, Imec v4.3 Release 20180525-phase3A ... Readme : Add MATLAB features, minor fixes, Imec v4.3 Release 20180515-phase3A ... Readme : Handle broken EEPROMs, fix FileViewer, Imec v4.3 fin","title":"Legacy"},{"location":"legacy/#history-older-versions","text":"","title":"History / Older versions"},{"location":"legacy/#imec-project-phases","text":"This site supports prototype and currently shipping commercial products. The latest commercial PXI-based components are: Hardware: Neuropixels 1.0 probes (also called phase3B2). Software: SpikeGLX 3.0 (also called phase30). There are five branches in this repo separately supporting the five Imec Neuropixels project development phases. The five phases have mutually incompatible hardware and software, so obtain the appropriate materials for your needs. Release software packages are labeled as phase3A, phase3B1, phase3B2, phase20, or phase30. All early releases having no phase label are actually phase3A. All releases support NI-DAQ based acquisition. Phase3A : Initially, 4 flavors of prototype probe (option 1, 2, 3, 4) were created enabling consortium members to choose the most useful architecture and feature set. Phase3A probes are connected one at a time to a Xilinx Kintex 7 FPGA board, and accessed via Ethernet. The probes, cables, HS and BSC parts are specific to phase3A. Phase3B1 : At this phase, option 3 probes had won and were further developed for commercial production. The same Xilinx board is retained for one at a time probe operation over Ethernet (but reprogrammed for 3B1). The cables, HS and BSC parts are all specific to 3B1. The 3B probes can be run with either 3B1 or 3B2 setups. Phase3B2 : A.k.a. Neuropixels 1.0. This phase replaces the Xilinx board with PXIe based modules, each of which connects up to 4 probes. Several modules can be operated together from one PXI chassis and one application. The probes are the same as phase3B1, but all other hardware parts are specific to the PXIe implementation. Phase20 : A.k.a. Neuropixels 2.0, introduces specific probes and HS with a more compact design. The HS each support two probes. The same PXIe modules can be used with a firmware update. SpikeGLX for this phase is specific to 2.0 hardware. Phase30 : This is unified software to support Neuropixels 1.0, 2.0 and all other probe hardware going forward. Again, the same base station modules can be used after updating their firmware, which can be done via SpikeGLX.","title":"Imec Project Phases"},{"location":"legacy/#older-versions","text":"30 : Release 20230905-phase30 ... Readme : Spike Viewer, bug fixes, imec v3.62 Release 20230815-phase30 ... Readme : NP2014, low latency mode, imec v3.62 Release 20230425-phase30 ... Readme : Anatomy data, better SNR, imec v3.60 Release 20230411-phase30 ... Readme : 2.0 probes, Fix PH2B headstage, imec v3.60 Release 20230323-phase30 ... Readme : Realistic geometry, ~snsGeomMap, Imec v3.57 Release 20230120-phase30 ... Readme : Fix TTL trigger, add UHD3 probes, Imec v3.57 Release 20221212-phase30 ... Readme : Fix sync SMA input, Imec v3.52 Release 20221012-phase30 ... Readme : Fix HS detection issue in 20220101, Imec v3.52 Release 20201103-phase30 ... Readme : Fix firmware update dialog, Imec v3.31 20 : Release 20200309-phase20 ... Readme : Multidrive output, Imec v2.11 3B2 (NP 1.0) : Release 20200520-phase3B2 ... Readme : Supports UHD-1, NHP, Imec v1.20 Release 20200309-phase3B2 ... Readme : Multidrive output, Imec v1.20 Release 20190724-phase3B2 ... Readme : Minor bug fixes, Imec v1.20 Release 20190413-phase3B2 ... Readme : Flexible bank selection, Imec v1.20 Release 20190327-phase3B2 ... Readme : Fix names with dots, Imec v1.15 3B1 : Release 20190413-phase3B1 ... Readme : Flexible bank selection, Imec v5.1 Release 20190327-phase3B1 ... Readme : Fix names with dots, Imec v5.1 Release 20190305-phase3B1 ... Readme : 32 NI channels, Imec v5.1 Release 20190214-phase3B1 ... Readme : Run folders, Imec v5.1 Release 20180829-phase3B1 ... Readme : Fix TTL trigger, Imec v5.1 Release 20180515-phase3B1 ... Readme : Fix FileViewer, Imec v5.1 Release 20180325-phase3B1 ... Readme : Fixed-up 3B1, Imec v5.1 3A : Release 20190413-phase3A ... Readme : Flexible bank selection, Imec v4.3 Release 20190327-phase3A ... Readme : Fix names with dots, Imec v4.3 Release 20190305-phase3A ... Readme : 32 NI channels, Imec v4.3 Release 20190214-phase3A ... Readme : Run folders, Imec v4.3 Release 20180829-phase3A ... Readme : Fix TTL trigger, Imec v4.3 Release 20180525-phase3A ... Readme : Add MATLAB features, minor fixes, Imec v4.3 Release 20180515-phase3A ... Readme : Handle broken EEPROMs, fix FileViewer, Imec v4.3 fin","title":"Older Versions"},{"location":"new/","text":"What's New On The Site? June 5, 2024 SpikeGLX-CPP-SDK supports Linux. April 24, 2024 C_Waves 2.6 (Handle int64 or uint64 spike times). January 29, 2024 SpikeGLX 20231207-phase30 (NP1016, imec 3.62.1). December 18, 2023 CatGT 4.3 (Supercat can join runs with varied sample rates). December 6, 2023 SpikeGLX 20230905-phase30 (Spike Viewer, bug fixes). September 5, 2023 SpikeGLX 20230815-phase30 (NP2014, low latency mode). August 19, 2023 SpikeGLX 20230425-phase30 (Anatomy, better SNR). Improved C++ API. Added API for C, C#, Python. Updated HelloSGLX. July 11, 2023 CatGT 4.2 (Add -no_catgt_fld option). July 03, 2023 CatGT 4.1 (Add -maxZ option). June 20, 2023 HelloSGLX (new). OverStrike (new). May 22, 2023 C_Waves 2.5 (Handle phy output). May 19, 2023 CatGT 4.0 (Update probe support). C_Waves 2.4 (Update probe support). April 25, 2023 SpikeGLX 20230411-phase30 (Fix PH2B headstage). April 11, 2023 SpikeGLX 20230326-phase30 (Support New NP 2.0, Uses GeomMaps). CatGT 3.9 (Fix supercat of LF files). Update SGLXMetaToCoords. April 6, 2023 CatGT 3.8 (Support 2.0 probes). C_Waves 2.3 (Support 2.0 probes). March 26, 2023 SpikeGLX 20230323-phase30 (Fix shank editor:{box-size,LFP crash}, Uses GeomMaps). March 25, 2023 Python SGLXMetaToCoords added. March 23, 2023 SpikeGLX 20230320-phase30 (Fix shank editor bug, Uses GeomMaps). Update SGLXMetaToCoords. Update SpikeGLX_Datafile_Tools. March 20, 2023 SpikeGLX 20230202-phase30 (Uses GeomMaps). CatGT 3.7 (Uses GeomMaps). C_Waves 2.2 (Uses GeomMaps). February 17, 2023 CatGT 3.6 (Selective channel saving, median CAR, better g-series). February 9, 2023 Update PXI requirements. Update SpikeGLX_Datafile_Tools (fix how Python gets 2.0 probe gains). February 5, 2023 TPrime 1.8 (Add -offsets option). February 2, 2023 SpikeGLX 20230120-phase30 (Single-threaded probe programming). January 20, 2023 Updated SpikeGLX 20230101-phase30 with correct DLLs. January 19, 2023 SpikeGLX 20230101-phase30 (Fix TTL trigger, add UHD3 probes). Last minute API update to support probe NP1015. January 18, 2023 SpikeGLX 20221220-phase30 (Fix TTL trigger, add UHD3 probes). CatGT 3.5 (Support latest probes). C_Waves 2.1 (Support latest probes). December 22, 2022 Add survey mode video. December 15, 2022 SpikeGLX 20221212-phase30 (Fix passive UHD probe editing). Add IMRO editor video. December 12, 2022 SpikeGLX 20221031-phase30 (Fix imec sync SMA input). October 12, 2022 SpikeGLX 20221012-phase30 (Fix HS detection issue in 20220101). CatGT 3.4 (Fix -gfix on save channel subsets, add -startsecs). Update SpikeGLX help. September 13, 2022 SpikeGLX 20220101-phase30 (All new for 22!). July 14, 2022 CatGT 3.3 (Fix -maxsecs option). July 1, 2022 CatGT 3.2 (AP -> LF for 1.0 data). June 27, 2022 NIScaler 1.1 (Fix rollover of saturation voltage). June 20, 2022 CatGT 3.1 (Fix loccar channel exclusion). C_Waves 2.0 (Fix SNR channel exclusion). June 4, 2022 Add NIScaler to postprocessing tools. May 18, 2022 Update UserManual. Add description of remote control SDKs. May 2, 2022 Update help discussions of CatGT and Sync. Post SpikeGLX_QuickRef under Help menus. April 21, 2022 CatGT 3.0 (Onebox, new extractors, auto sync, fyi). March 18, 2022 New SGLXMetaToCoods.zip (Support more probes, fix ref channel ID). March 3, 2022 C_Waves 1.9 (Support UHD2 and current probes). February 23, 2022 CatGT 2.5 (Add concatenation offsets files). February 17, 2022 Post firmware making basestations compatible with X1 chassis slots. February 2, 2022 Publish {CatGT, TPrime, C_Waves} source code on github. November 24, 2021 CatGT 2.4 (Add option -gtlist). October 12, 2021 C_Waves 1.8 (Code same, update: ReadMe, runit script). October 1, 2021 CatGT 2.3 (pass1_force_ni_bin, fix supercat param dependency). September 15, 2021 CatGT 2.2 (Acausal Butterworth filter). Updated site help on CatGT. July 29, 2021 CatGT 2.1 (BF gets inarow parameter). July 20, 2021 CatGT 2.0 (XA seeks threshold-2 even if millisecs=0). June 28, 2021 TPrime 1.7 (Fix end-of-file parsing). June 13, 2021 SpikeGLX_Datafile_Tools updated for 2.0 probes. CatGT 1.9: Fix link to fftw3 library. Remove glitch at tshift block boundaries. Option -gfix now exploits -tshift. Option -chnexcl now specified per probe. Option -chnexcl now modifies shankMap in output metadata. Stream option -lf creates .lf. from .ap. for 2.0 probes. Fix supercat premature completion bug. Supercat observes -exported option. Pass1 always writes new meta files for later supercat. Add option -supercat_trim_edges. Add option -supercat_skip_ni_bin. Add option -maxsecs. Add option -BF (bit-field decoder). April 26, 2021 CatGT 1.8 (Olivier Winter subsample time shifting). March 18, 2021 CatGT 1.7 (Suppress linux brace expansion). March 15, 2021 TPrime 1.6 (Fix potential crash). February 12, 2021 CatGT 1.6 (Fix g-series concatenation). February 10, 2021 CatGT 1.5 (supercat feature, better scripts). TPrime 1.5 (Better scripts). C_Waves 1.8 (Better scripts). January 26, 2021 CatGT 1.4.2 (Fix zerofillmax, add option -inarow to extractors). January 22, 2021 SpikeGLX 20201103-phase30 (Fix firmware update dialog). January 16, 2021 {CatGT, TPrime, C_Waves}: Linux package reposted with corrected runit.sh. January 15, 2021 {CatGT, TPrime, C_Waves}: Windows package reposted with corrected runit.bat. January 14, 2021 CatGT 1.4.1 (Linux, g-range, inverted extractors, flexible working dir). TPrime 1.4 (Linux, x64 headers, handle Fortran order, flexible working dir). C_Waves 1.7 (Linux, better SNR, flexible working dir). January 11, 2021 CatGT 1.4.0 (Linux, g-range, inverted extractors). TPrime 1.3 (Linux, x64 headers, handle Fortran order). C_Waves 1.6 (Linux, better SNR). Warn imec system not compatible with AMD computers. November 05, 2020: C_Waves 1.5 (Smoother mean waveforms). Link to Metadata_30.md. November 03, 2020: SpikeGLX 20201024-phase30 (Fix firmware updating). October 24, 2020: SpikeGLX 20201012-phase30 (Support NP1010 and NP1100 probes). CatGT 1.3.0 (Support NP1010 probe). C_Waves 1.4 (Support NP1010 probe). September 25, 2020: Release SpikeGLX 3.0. Retire SpikeGLX 1.0 and 2.0. C_Waves 1.3 (Supports FORTRAN order npy). August 20, 2020: New document: help/\"IMRO Table Anatomy.\" August 13, 2020: Disable 2.0 download temporarily. August 4, 2020: Fix links. July 16, 2020: SpikeGLX 20200520-phase3B2 (Supports UHD-1, NHP, Imec v1.20). SpikeGLX 20200520-phase20 (New 2.0 probe names, Imec v2.14). CatGT 1.2.9 (Supports UHD-1, NHP). C_Waves 1.2 (Supports UHD-1, NHP). Rename module firmware files. June 1, 2020: Add module firmware to Beta page. May 12, 2020: SpikeGLX 20200309 (PXI versions get multidrive run splitting). CatGT 1.2.8 (Option -prb_miss_ok addded for multidrive output). New document: help/\"Parsing Data Files.\" April 3, 2020: CatGT 1.2.7 (Extractors get optional pulse duration tolerance). New document: help/\"Noise: Learn How To Solder.\" March 26, 2020: C_Waves 1.1 (Removes 4GB binary file size limit). March 10, 2020: New SpikeGLX version (all phases). C_Waves 1.0 post-processing pipeline component added. March 06, 2020: CatGT 1.2.6. TPrime 1.2. New versions: Post-processing Tools. Add site menu: \"Help.\" Add site menu: \"New.\" New document: help/\"Sync: Aligning with Edges.\" fin","title":"New"},{"location":"new/#whats-new-on-the-site","text":"June 5, 2024 SpikeGLX-CPP-SDK supports Linux. April 24, 2024 C_Waves 2.6 (Handle int64 or uint64 spike times). January 29, 2024 SpikeGLX 20231207-phase30 (NP1016, imec 3.62.1). December 18, 2023 CatGT 4.3 (Supercat can join runs with varied sample rates). December 6, 2023 SpikeGLX 20230905-phase30 (Spike Viewer, bug fixes). September 5, 2023 SpikeGLX 20230815-phase30 (NP2014, low latency mode). August 19, 2023 SpikeGLX 20230425-phase30 (Anatomy, better SNR). Improved C++ API. Added API for C, C#, Python. Updated HelloSGLX. July 11, 2023 CatGT 4.2 (Add -no_catgt_fld option). July 03, 2023 CatGT 4.1 (Add -maxZ option). June 20, 2023 HelloSGLX (new). OverStrike (new). May 22, 2023 C_Waves 2.5 (Handle phy output). May 19, 2023 CatGT 4.0 (Update probe support). C_Waves 2.4 (Update probe support). April 25, 2023 SpikeGLX 20230411-phase30 (Fix PH2B headstage). April 11, 2023 SpikeGLX 20230326-phase30 (Support New NP 2.0, Uses GeomMaps). CatGT 3.9 (Fix supercat of LF files). Update SGLXMetaToCoords. April 6, 2023 CatGT 3.8 (Support 2.0 probes). C_Waves 2.3 (Support 2.0 probes). March 26, 2023 SpikeGLX 20230323-phase30 (Fix shank editor:{box-size,LFP crash}, Uses GeomMaps). March 25, 2023 Python SGLXMetaToCoords added. March 23, 2023 SpikeGLX 20230320-phase30 (Fix shank editor bug, Uses GeomMaps). Update SGLXMetaToCoords. Update SpikeGLX_Datafile_Tools. March 20, 2023 SpikeGLX 20230202-phase30 (Uses GeomMaps). CatGT 3.7 (Uses GeomMaps). C_Waves 2.2 (Uses GeomMaps). February 17, 2023 CatGT 3.6 (Selective channel saving, median CAR, better g-series). February 9, 2023 Update PXI requirements. Update SpikeGLX_Datafile_Tools (fix how Python gets 2.0 probe gains). February 5, 2023 TPrime 1.8 (Add -offsets option). February 2, 2023 SpikeGLX 20230120-phase30 (Single-threaded probe programming). January 20, 2023 Updated SpikeGLX 20230101-phase30 with correct DLLs. January 19, 2023 SpikeGLX 20230101-phase30 (Fix TTL trigger, add UHD3 probes). Last minute API update to support probe NP1015. January 18, 2023 SpikeGLX 20221220-phase30 (Fix TTL trigger, add UHD3 probes). CatGT 3.5 (Support latest probes). C_Waves 2.1 (Support latest probes). December 22, 2022 Add survey mode video. December 15, 2022 SpikeGLX 20221212-phase30 (Fix passive UHD probe editing). Add IMRO editor video. December 12, 2022 SpikeGLX 20221031-phase30 (Fix imec sync SMA input). October 12, 2022 SpikeGLX 20221012-phase30 (Fix HS detection issue in 20220101). CatGT 3.4 (Fix -gfix on save channel subsets, add -startsecs). Update SpikeGLX help. September 13, 2022 SpikeGLX 20220101-phase30 (All new for 22!). July 14, 2022 CatGT 3.3 (Fix -maxsecs option). July 1, 2022 CatGT 3.2 (AP -> LF for 1.0 data). June 27, 2022 NIScaler 1.1 (Fix rollover of saturation voltage). June 20, 2022 CatGT 3.1 (Fix loccar channel exclusion). C_Waves 2.0 (Fix SNR channel exclusion). June 4, 2022 Add NIScaler to postprocessing tools. May 18, 2022 Update UserManual. Add description of remote control SDKs. May 2, 2022 Update help discussions of CatGT and Sync. Post SpikeGLX_QuickRef under Help menus. April 21, 2022 CatGT 3.0 (Onebox, new extractors, auto sync, fyi). March 18, 2022 New SGLXMetaToCoods.zip (Support more probes, fix ref channel ID). March 3, 2022 C_Waves 1.9 (Support UHD2 and current probes). February 23, 2022 CatGT 2.5 (Add concatenation offsets files). February 17, 2022 Post firmware making basestations compatible with X1 chassis slots. February 2, 2022 Publish {CatGT, TPrime, C_Waves} source code on github. November 24, 2021 CatGT 2.4 (Add option -gtlist). October 12, 2021 C_Waves 1.8 (Code same, update: ReadMe, runit script). October 1, 2021 CatGT 2.3 (pass1_force_ni_bin, fix supercat param dependency). September 15, 2021 CatGT 2.2 (Acausal Butterworth filter). Updated site help on CatGT. July 29, 2021 CatGT 2.1 (BF gets inarow parameter). July 20, 2021 CatGT 2.0 (XA seeks threshold-2 even if millisecs=0). June 28, 2021 TPrime 1.7 (Fix end-of-file parsing). June 13, 2021 SpikeGLX_Datafile_Tools updated for 2.0 probes. CatGT 1.9: Fix link to fftw3 library. Remove glitch at tshift block boundaries. Option -gfix now exploits -tshift. Option -chnexcl now specified per probe. Option -chnexcl now modifies shankMap in output metadata. Stream option -lf creates .lf. from .ap. for 2.0 probes. Fix supercat premature completion bug. Supercat observes -exported option. Pass1 always writes new meta files for later supercat. Add option -supercat_trim_edges. Add option -supercat_skip_ni_bin. Add option -maxsecs. Add option -BF (bit-field decoder). April 26, 2021 CatGT 1.8 (Olivier Winter subsample time shifting). March 18, 2021 CatGT 1.7 (Suppress linux brace expansion). March 15, 2021 TPrime 1.6 (Fix potential crash). February 12, 2021 CatGT 1.6 (Fix g-series concatenation). February 10, 2021 CatGT 1.5 (supercat feature, better scripts). TPrime 1.5 (Better scripts). C_Waves 1.8 (Better scripts). January 26, 2021 CatGT 1.4.2 (Fix zerofillmax, add option -inarow to extractors). January 22, 2021 SpikeGLX 20201103-phase30 (Fix firmware update dialog). January 16, 2021 {CatGT, TPrime, C_Waves}: Linux package reposted with corrected runit.sh. January 15, 2021 {CatGT, TPrime, C_Waves}: Windows package reposted with corrected runit.bat. January 14, 2021 CatGT 1.4.1 (Linux, g-range, inverted extractors, flexible working dir). TPrime 1.4 (Linux, x64 headers, handle Fortran order, flexible working dir). C_Waves 1.7 (Linux, better SNR, flexible working dir). January 11, 2021 CatGT 1.4.0 (Linux, g-range, inverted extractors). TPrime 1.3 (Linux, x64 headers, handle Fortran order). C_Waves 1.6 (Linux, better SNR). Warn imec system not compatible with AMD computers. November 05, 2020: C_Waves 1.5 (Smoother mean waveforms). Link to Metadata_30.md. November 03, 2020: SpikeGLX 20201024-phase30 (Fix firmware updating). October 24, 2020: SpikeGLX 20201012-phase30 (Support NP1010 and NP1100 probes). CatGT 1.3.0 (Support NP1010 probe). C_Waves 1.4 (Support NP1010 probe). September 25, 2020: Release SpikeGLX 3.0. Retire SpikeGLX 1.0 and 2.0. C_Waves 1.3 (Supports FORTRAN order npy). August 20, 2020: New document: help/\"IMRO Table Anatomy.\" August 13, 2020: Disable 2.0 download temporarily. August 4, 2020: Fix links. July 16, 2020: SpikeGLX 20200520-phase3B2 (Supports UHD-1, NHP, Imec v1.20). SpikeGLX 20200520-phase20 (New 2.0 probe names, Imec v2.14). CatGT 1.2.9 (Supports UHD-1, NHP). C_Waves 1.2 (Supports UHD-1, NHP). Rename module firmware files. June 1, 2020: Add module firmware to Beta page. May 12, 2020: SpikeGLX 20200309 (PXI versions get multidrive run splitting). CatGT 1.2.8 (Option -prb_miss_ok addded for multidrive output). New document: help/\"Parsing Data Files.\" April 3, 2020: CatGT 1.2.7 (Extractors get optional pulse duration tolerance). New document: help/\"Noise: Learn How To Solder.\" March 26, 2020: C_Waves 1.1 (Removes 4GB binary file size limit). March 10, 2020: New SpikeGLX version (all phases). C_Waves 1.0 post-processing pipeline component added. March 06, 2020: CatGT 1.2.6. TPrime 1.2. New versions: Post-processing Tools. Add site menu: \"Help.\" Add site menu: \"New.\" New document: help/\"Sync: Aligning with Edges.\" fin","title":"What's New On The Site?"},{"location":"help/imroTables/","text":"IMRO Table Anatomy IM ec R ead O ut tables are simple text files that describe how to configure each readout channel on an imec probe. Each type of probe may have its own set of parameters to access that type's special features. SpikeGLX has (or will have) a simple table editor for each probe type, but sometimes you may want to do something custom. This document shows how to write your own (*.imro) files. You can load your own files using the Load button in the SpikeGLX table editor. Note: When you load your own imro table file, you probably want to select default as your shank map. The default will automatically populate the shank(s) according to your imro table. You'll probably also want to select default for your channel map. The default channel map will order your graphs from the tip of the probe to the top (base) according to your imro table. Text Examples Type 0: (0,384)(0 0 0 500 250 1)(1 0 0 500 250 1)(2 0 0 500 250 1)(3 0 0 500 250 1)(4 0 0 500 250 1)(5 0 0 500 250 1)(6 0 0 500 250 1)(7 0 0 500 250 1)(8 0 0 500 250 1)(9 0 0 500 250 1)(10 0 0 500 250 1)(11 0 0 500 250 1)(12 0 0 500 250 1)(13 0 0 500 250 1)(14 0 0 500 250 1)(15 0 0 500 250 1)(16 0 0 500 250 1)(17 0 0 500 250 1)(18 0 0 500 250 1)(19 0 0 500 250 1)(20 0 0 500 250 1)(21 0 0 500 250 1)(22 0 0 500 250 1)(23 0 0 500 250 1)(24 0 0 500 250 1)(25 0 0 500 250 1)(26 0 0 500 250 1)(27 0 0 500 250 1)(28 0 0 500 250 1)(29 0 0 500 250 1)(30 0 0 500 250 1)(31 0 0 500 250 1)(32 0 0 500 250 1)(33 0 0 500 250 1)(34 0 0 500 250 1)(35 0 0 500 250 1)(36 0 0 500 250 1)(37 0 0 500 250 1)(38 0 0 500 250 1)(39 0 0 500 250 1)(40 0 0 500 250 1)(41 0 0 500 250 1)(42 0 0 500 250 1)(43 0 0 500 250 1)(44 0 0 500 250 1)(45 0 0 500 250 1)(46 0 0 500 250 1)(47 0 0 500 250 1)(48 0 0 500 250 1)(49 0 0 500 250 1)(50 0 0 500 250 1)(51 0 0 500 250 1)(52 0 0 500 250 1)(53 0 0 500 250 1)(54 0 0 500 250 1)(55 0 0 500 250 1)(56 0 0 500 250 1)(57 0 0 500 250 1)(58 0 0 500 250 1)(59 0 0 500 250 1)(60 0 0 500 250 1)(61 0 0 500 250 1)(62 0 0 500 250 1)(63 0 0 500 250 1)(64 0 0 500 250 1)(65 0 0 500 250 1)(66 0 0 500 250 1)(67 0 0 500 250 1)(68 0 0 500 250 1)(69 0 0 500 250 1)(70 0 0 500 250 1)(71 0 0 500 250 1)(72 0 0 500 250 1)(73 0 0 500 250 1)(74 0 0 500 250 1)(75 0 0 500 250 1)(76 0 0 500 250 1)(77 0 0 500 250 1)(78 0 0 500 250 1)(79 0 0 500 250 1)(80 0 0 500 250 1)(81 0 0 500 250 1)(82 0 0 500 250 1)(83 0 0 500 250 1)(84 0 0 500 250 1)(85 0 0 500 250 1)(86 0 0 500 250 1)(87 0 0 500 250 1)(88 0 0 500 250 1)(89 0 0 500 250 1)(90 0 0 500 250 1)(91 0 0 500 250 1)(92 0 0 500 250 1)(93 0 0 500 250 1)(94 0 0 500 250 1)(95 0 0 500 250 1)(96 0 0 500 250 1)(97 0 0 500 250 1)(98 0 0 500 250 1)(99 0 0 500 250 1)(100 0 0 500 250 1)(101 0 0 500 250 1)(102 0 0 500 250 1)(103 0 0 500 250 1)(104 0 0 500 250 1)(105 0 0 500 250 1)(106 0 0 500 250 1)(107 0 0 500 250 1)(108 0 0 500 250 1)(109 0 0 500 250 1)(110 0 0 500 250 1)(111 0 0 500 250 1)(112 0 0 500 250 1)(113 0 0 500 250 1)(114 0 0 500 250 1)(115 0 0 500 250 1)(116 0 0 500 250 1)(117 0 0 500 250 1)(118 0 0 500 250 1)(119 0 0 500 250 1)(120 0 0 500 250 1)(121 0 0 500 250 1)(122 0 0 500 250 1)(123 0 0 500 250 1)(124 0 0 500 250 1)(125 0 0 500 250 1)(126 0 0 500 250 1)(127 0 0 500 250 1)(128 0 0 500 250 1)(129 0 0 500 250 1)(130 0 0 500 250 1)(131 0 0 500 250 1)(132 0 0 500 250 1)(133 0 0 500 250 1)(134 0 0 500 250 1)(135 0 0 500 250 1)(136 0 0 500 250 1)(137 0 0 500 250 1)(138 0 0 500 250 1)(139 0 0 500 250 1)(140 0 0 500 250 1)(141 0 0 500 250 1)(142 0 0 500 250 1)(143 0 0 500 250 1)(144 0 0 500 250 1)(145 0 0 500 250 1)(146 0 0 500 250 1)(147 0 0 500 250 1)(148 0 0 500 250 1)(149 0 0 500 250 1)(150 0 0 500 250 1)(151 0 0 500 250 1)(152 0 0 500 250 1)(153 0 0 500 250 1)(154 0 0 500 250 1)(155 0 0 500 250 1)(156 0 0 500 250 1)(157 0 0 500 250 1)(158 0 0 500 250 1)(159 0 0 500 250 1)(160 0 0 500 250 1)(161 0 0 500 250 1)(162 0 0 500 250 1)(163 0 0 500 250 1)(164 0 0 500 250 1)(165 0 0 500 250 1)(166 0 0 500 250 1)(167 0 0 500 250 1)(168 0 0 500 250 1)(169 0 0 500 250 1)(170 0 0 500 250 1)(171 0 0 500 250 1)(172 0 0 500 250 1)(173 0 0 500 250 1)(174 0 0 500 250 1)(175 0 0 500 250 1)(176 0 0 500 250 1)(177 0 0 500 250 1)(178 0 0 500 250 1)(179 0 0 500 250 1)(180 0 0 500 250 1)(181 0 0 500 250 1)(182 0 0 500 250 1)(183 0 0 500 250 1)(184 0 0 500 250 1)(185 0 0 500 250 1)(186 0 0 500 250 1)(187 0 0 500 250 1)(188 0 0 500 250 1)(189 0 0 500 250 1)(190 0 0 500 250 1)(191 0 0 500 250 1)(192 0 0 500 250 1)(193 0 0 500 250 1)(194 0 0 500 250 1)(195 0 0 500 250 1)(196 0 0 500 250 1)(197 0 0 500 250 1)(198 0 0 500 250 1)(199 0 0 500 250 1)(200 0 0 500 250 1)(201 0 0 500 250 1)(202 0 0 500 250 1)(203 0 0 500 250 1)(204 0 0 500 250 1)(205 0 0 500 250 1)(206 0 0 500 250 1)(207 0 0 500 250 1)(208 0 0 500 250 1)(209 0 0 500 250 1)(210 0 0 500 250 1)(211 0 0 500 250 1)(212 0 0 500 250 1)(213 0 0 500 250 1)(214 0 0 500 250 1)(215 0 0 500 250 1)(216 0 0 500 250 1)(217 0 0 500 250 1)(218 0 0 500 250 1)(219 0 0 500 250 1)(220 0 0 500 250 1)(221 0 0 500 250 1)(222 0 0 500 250 1)(223 0 0 500 250 1)(224 0 0 500 250 1)(225 0 0 500 250 1)(226 0 0 500 250 1)(227 0 0 500 250 1)(228 0 0 500 250 1)(229 0 0 500 250 1)(230 0 0 500 250 1)(231 0 0 500 250 1)(232 0 0 500 250 1)(233 0 0 500 250 1)(234 0 0 500 250 1)(235 0 0 500 250 1)(236 0 0 500 250 1)(237 0 0 500 250 1)(238 0 0 500 250 1)(239 0 0 500 250 1)(240 0 0 500 250 1)(241 0 0 500 250 1)(242 0 0 500 250 1)(243 0 0 500 250 1)(244 0 0 500 250 1)(245 0 0 500 250 1)(246 0 0 500 250 1)(247 0 0 500 250 1)(248 0 0 500 250 1)(249 0 0 500 250 1)(250 0 0 500 250 1)(251 0 0 500 250 1)(252 0 0 500 250 1)(253 0 0 500 250 1)(254 0 0 500 250 1)(255 0 0 500 250 1)(256 0 0 500 250 1)(257 0 0 500 250 1)(258 0 0 500 250 1)(259 0 0 500 250 1)(260 0 0 500 250 1)(261 0 0 500 250 1)(262 0 0 500 250 1)(263 0 0 500 250 1)(264 0 0 500 250 1)(265 0 0 500 250 1)(266 0 0 500 250 1)(267 0 0 500 250 1)(268 0 0 500 250 1)(269 0 0 500 250 1)(270 0 0 500 250 1)(271 0 0 500 250 1)(272 0 0 500 250 1)(273 0 0 500 250 1)(274 0 0 500 250 1)(275 0 0 500 250 1)(276 0 0 500 250 1)(277 0 0 500 250 1)(278 0 0 500 250 1)(279 0 0 500 250 1)(280 0 0 500 250 1)(281 0 0 500 250 1)(282 0 0 500 250 1)(283 0 0 500 250 1)(284 0 0 500 250 1)(285 0 0 500 250 1)(286 0 0 500 250 1)(287 0 0 500 250 1)(288 0 0 500 250 1)(289 0 0 500 250 1)(290 0 0 500 250 1)(291 0 0 500 250 1)(292 0 0 500 250 1)(293 0 0 500 250 1)(294 0 0 500 250 1)(295 0 0 500 250 1)(296 0 0 500 250 1)(297 0 0 500 250 1)(298 0 0 500 250 1)(299 0 0 500 250 1)(300 0 0 500 250 1)(301 0 0 500 250 1)(302 0 0 500 250 1)(303 0 0 500 250 1)(304 0 0 500 250 1)(305 0 0 500 250 1)(306 0 0 500 250 1)(307 0 0 500 250 1)(308 0 0 500 250 1)(309 0 0 500 250 1)(310 0 0 500 250 1)(311 0 0 500 250 1)(312 0 0 500 250 1)(313 0 0 500 250 1)(314 0 0 500 250 1)(315 0 0 500 250 1)(316 0 0 500 250 1)(317 0 0 500 250 1)(318 0 0 500 250 1)(319 0 0 500 250 1)(320 0 0 500 250 1)(321 0 0 500 250 1)(322 0 0 500 250 1)(323 0 0 500 250 1)(324 0 0 500 250 1)(325 0 0 500 250 1)(326 0 0 500 250 1)(327 0 0 500 250 1)(328 0 0 500 250 1)(329 0 0 500 250 1)(330 0 0 500 250 1)(331 0 0 500 250 1)(332 0 0 500 250 1)(333 0 0 500 250 1)(334 0 0 500 250 1)(335 0 0 500 250 1)(336 0 0 500 250 1)(337 0 0 500 250 1)(338 0 0 500 250 1)(339 0 0 500 250 1)(340 0 0 500 250 1)(341 0 0 500 250 1)(342 0 0 500 250 1)(343 0 0 500 250 1)(344 0 0 500 250 1)(345 0 0 500 250 1)(346 0 0 500 250 1)(347 0 0 500 250 1)(348 0 0 500 250 1)(349 0 0 500 250 1)(350 0 0 500 250 1)(351 0 0 500 250 1)(352 0 0 500 250 1)(353 0 0 500 250 1)(354 0 0 500 250 1)(355 0 0 500 250 1)(356 0 0 500 250 1)(357 0 0 500 250 1)(358 0 0 500 250 1)(359 0 0 500 250 1)(360 0 0 500 250 1)(361 0 0 500 250 1)(362 0 0 500 250 1)(363 0 0 500 250 1)(364 0 0 500 250 1)(365 0 0 500 250 1)(366 0 0 500 250 1)(367 0 0 500 250 1)(368 0 0 500 250 1)(369 0 0 500 250 1)(370 0 0 500 250 1)(371 0 0 500 250 1)(372 0 0 500 250 1)(373 0 0 500 250 1)(374 0 0 500 250 1)(375 0 0 500 250 1)(376 0 0 500 250 1)(377 0 0 500 250 1)(378 0 0 500 250 1)(379 0 0 500 250 1)(380 0 0 500 250 1)(381 0 0 500 250 1)(382 0 0 500 250 1)(383 0 0 500 250 1) Type 21: (21,384)(0 1 0 0)(1 1 0 1)(2 1 0 2)(3 1 0 3)(4 1 0 4)(5 1 0 5)(6 1 0 6)(7 1 0 7)(8 1 0 8)(9 1 0 9)(10 1 0 10)(11 1 0 11)(12 1 0 12)(13 1 0 13)(14 1 0 14)(15 1 0 15)(16 1 0 16)(17 1 0 17)(18 1 0 18)(19 1 0 19)(20 1 0 20)(21 1 0 21)(22 1 0 22)(23 1 0 23)(24 1 0 24)(25 1 0 25)(26 1 0 26)(27 1 0 27)(28 1 0 28)(29 1 0 29)(30 1 0 30)(31 1 0 31)(32 1 0 32)(33 1 0 33)(34 1 0 34)(35 1 0 35)(36 1 0 36)(37 1 0 37)(38 1 0 38)(39 1 0 39)(40 1 0 40)(41 1 0 41)(42 1 0 42)(43 1 0 43)(44 1 0 44)(45 1 0 45)(46 1 0 46)(47 1 0 47)(48 1 0 48)(49 1 0 49)(50 1 0 50)(51 1 0 51)(52 1 0 52)(53 1 0 53)(54 1 0 54)(55 1 0 55)(56 1 0 56)(57 1 0 57)(58 1 0 58)(59 1 0 59)(60 1 0 60)(61 1 0 61)(62 1 0 62)(63 1 0 63)(64 1 0 64)(65 1 0 65)(66 1 0 66)(67 1 0 67)(68 1 0 68)(69 1 0 69)(70 1 0 70)(71 1 0 71)(72 1 0 72)(73 1 0 73)(74 1 0 74)(75 1 0 75)(76 1 0 76)(77 1 0 77)(78 1 0 78)(79 1 0 79)(80 1 0 80)(81 1 0 81)(82 1 0 82)(83 1 0 83)(84 1 0 84)(85 1 0 85)(86 1 0 86)(87 1 0 87)(88 1 0 88)(89 1 0 89)(90 1 0 90)(91 1 0 91)(92 1 0 92)(93 1 0 93)(94 1 0 94)(95 1 0 95)(96 1 0 96)(97 1 0 97)(98 1 0 98)(99 1 0 99)(100 1 0 100)(101 1 0 101)(102 1 0 102)(103 1 0 103)(104 1 0 104)(105 1 0 105)(106 1 0 106)(107 1 0 107)(108 1 0 108)(109 1 0 109)(110 1 0 110)(111 1 0 111)(112 1 0 112)(113 1 0 113)(114 1 0 114)(115 1 0 115)(116 1 0 116)(117 1 0 117)(118 1 0 118)(119 1 0 119)(120 1 0 120)(121 1 0 121)(122 1 0 122)(123 1 0 123)(124 1 0 124)(125 1 0 125)(126 1 0 126)(127 1 0 127)(128 1 0 128)(129 1 0 129)(130 1 0 130)(131 1 0 131)(132 1 0 132)(133 1 0 133)(134 1 0 134)(135 1 0 135)(136 1 0 136)(137 1 0 137)(138 1 0 138)(139 1 0 139)(140 1 0 140)(141 1 0 141)(142 1 0 142)(143 1 0 143)(144 1 0 144)(145 1 0 145)(146 1 0 146)(147 1 0 147)(148 1 0 148)(149 1 0 149)(150 1 0 150)(151 1 0 151)(152 1 0 152)(153 1 0 153)(154 1 0 154)(155 1 0 155)(156 1 0 156)(157 1 0 157)(158 1 0 158)(159 1 0 159)(160 1 0 160)(161 1 0 161)(162 1 0 162)(163 1 0 163)(164 1 0 164)(165 1 0 165)(166 1 0 166)(167 1 0 167)(168 1 0 168)(169 1 0 169)(170 1 0 170)(171 1 0 171)(172 1 0 172)(173 1 0 173)(174 1 0 174)(175 1 0 175)(176 1 0 176)(177 1 0 177)(178 1 0 178)(179 1 0 179)(180 1 0 180)(181 1 0 181)(182 1 0 182)(183 1 0 183)(184 1 0 184)(185 1 0 185)(186 1 0 186)(187 1 0 187)(188 1 0 188)(189 1 0 189)(190 1 0 190)(191 1 0 191)(192 1 0 192)(193 1 0 193)(194 1 0 194)(195 1 0 195)(196 1 0 196)(197 1 0 197)(198 1 0 198)(199 1 0 199)(200 1 0 200)(201 1 0 201)(202 1 0 202)(203 1 0 203)(204 1 0 204)(205 1 0 205)(206 1 0 206)(207 1 0 207)(208 1 0 208)(209 1 0 209)(210 1 0 210)(211 1 0 211)(212 1 0 212)(213 1 0 213)(214 1 0 214)(215 1 0 215)(216 1 0 216)(217 1 0 217)(218 1 0 218)(219 1 0 219)(220 1 0 220)(221 1 0 221)(222 1 0 222)(223 1 0 223)(224 1 0 224)(225 1 0 225)(226 1 0 226)(227 1 0 227)(228 1 0 228)(229 1 0 229)(230 1 0 230)(231 1 0 231)(232 1 0 232)(233 1 0 233)(234 1 0 234)(235 1 0 235)(236 1 0 236)(237 1 0 237)(238 1 0 238)(239 1 0 239)(240 1 0 240)(241 1 0 241)(242 1 0 242)(243 1 0 243)(244 1 0 244)(245 1 0 245)(246 1 0 246)(247 1 0 247)(248 1 0 248)(249 1 0 249)(250 1 0 250)(251 1 0 251)(252 1 0 252)(253 1 0 253)(254 1 0 254)(255 1 0 255)(256 1 0 256)(257 1 0 257)(258 1 0 258)(259 1 0 259)(260 1 0 260)(261 1 0 261)(262 1 0 262)(263 1 0 263)(264 1 0 264)(265 1 0 265)(266 1 0 266)(267 1 0 267)(268 1 0 268)(269 1 0 269)(270 1 0 270)(271 1 0 271)(272 1 0 272)(273 1 0 273)(274 1 0 274)(275 1 0 275)(276 1 0 276)(277 1 0 277)(278 1 0 278)(279 1 0 279)(280 1 0 280)(281 1 0 281)(282 1 0 282)(283 1 0 283)(284 1 0 284)(285 1 0 285)(286 1 0 286)(287 1 0 287)(288 1 0 288)(289 1 0 289)(290 1 0 290)(291 1 0 291)(292 1 0 292)(293 1 0 293)(294 1 0 294)(295 1 0 295)(296 1 0 296)(297 1 0 297)(298 1 0 298)(299 1 0 299)(300 1 0 300)(301 1 0 301)(302 1 0 302)(303 1 0 303)(304 1 0 304)(305 1 0 305)(306 1 0 306)(307 1 0 307)(308 1 0 308)(309 1 0 309)(310 1 0 310)(311 1 0 311)(312 1 0 312)(313 1 0 313)(314 1 0 314)(315 1 0 315)(316 1 0 316)(317 1 0 317)(318 1 0 318)(319 1 0 319)(320 1 0 320)(321 1 0 321)(322 1 0 322)(323 1 0 323)(324 1 0 324)(325 1 0 325)(326 1 0 326)(327 1 0 327)(328 1 0 328)(329 1 0 329)(330 1 0 330)(331 1 0 331)(332 1 0 332)(333 1 0 333)(334 1 0 334)(335 1 0 335)(336 1 0 336)(337 1 0 337)(338 1 0 338)(339 1 0 339)(340 1 0 340)(341 1 0 341)(342 1 0 342)(343 1 0 343)(344 1 0 344)(345 1 0 345)(346 1 0 346)(347 1 0 347)(348 1 0 348)(349 1 0 349)(350 1 0 350)(351 1 0 351)(352 1 0 352)(353 1 0 353)(354 1 0 354)(355 1 0 355)(356 1 0 356)(357 1 0 357)(358 1 0 358)(359 1 0 359)(360 1 0 360)(361 1 0 361)(362 1 0 362)(363 1 0 363)(364 1 0 364)(365 1 0 365)(366 1 0 366)(367 1 0 367)(368 1 0 368)(369 1 0 369)(370 1 0 370)(371 1 0 371)(372 1 0 372)(373 1 0 373)(374 1 0 374)(375 1 0 375)(376 1 0 376)(377 1 0 377)(378 1 0 378)(379 1 0 379)(380 1 0 380)(381 1 0 381)(382 1 0 382)(383 1 0 383) Type 24: (24,384)(0 0 0 1 0)(1 0 0 1 1)(2 0 0 1 2)(3 0 0 1 3)(4 0 0 1 4)(5 0 0 1 5)(6 0 0 1 6)(7 0 0 1 7)(8 0 0 1 8)(9 0 0 1 9)(10 0 0 1 10)(11 0 0 1 11)(12 0 0 1 12)(13 0 0 1 13)(14 0 0 1 14)(15 0 0 1 15)(16 0 0 1 16)(17 0 0 1 17)(18 0 0 1 18)(19 0 0 1 19)(20 0 0 1 20)(21 0 0 1 21)(22 0 0 1 22)(23 0 0 1 23)(24 0 0 1 24)(25 0 0 1 25)(26 0 0 1 26)(27 0 0 1 27)(28 0 0 1 28)(29 0 0 1 29)(30 0 0 1 30)(31 0 0 1 31)(32 0 0 1 32)(33 0 0 1 33)(34 0 0 1 34)(35 0 0 1 35)(36 0 0 1 36)(37 0 0 1 37)(38 0 0 1 38)(39 0 0 1 39)(40 0 0 1 40)(41 0 0 1 41)(42 0 0 1 42)(43 0 0 1 43)(44 0 0 1 44)(45 0 0 1 45)(46 0 0 1 46)(47 0 0 1 47)(48 0 0 1 288)(49 0 0 1 289)(50 0 0 1 290)(51 0 0 1 291)(52 0 0 1 292)(53 0 0 1 293)(54 0 0 1 294)(55 0 0 1 295)(56 0 0 1 296)(57 0 0 1 297)(58 0 0 1 298)(59 0 0 1 299)(60 0 0 1 300)(61 0 0 1 301)(62 0 0 1 302)(63 0 0 1 303)(64 0 0 1 304)(65 0 0 1 305)(66 0 0 1 306)(67 0 0 1 307)(68 0 0 1 308)(69 0 0 1 309)(70 0 0 1 310)(71 0 0 1 311)(72 0 0 1 312)(73 0 0 1 313)(74 0 0 1 314)(75 0 0 1 315)(76 0 0 1 316)(77 0 0 1 317)(78 0 0 1 318)(79 0 0 1 319)(80 0 0 1 320)(81 0 0 1 321)(82 0 0 1 322)(83 0 0 1 323)(84 0 0 1 324)(85 0 0 1 325)(86 0 0 1 326)(87 0 0 1 327)(88 0 0 1 328)(89 0 0 1 329)(90 0 0 1 330)(91 0 0 1 331)(92 0 0 1 332)(93 0 0 1 333)(94 0 0 1 334)(95 0 0 1 335)(96 0 0 1 48)(97 0 0 1 49)(98 0 0 1 50)(99 0 0 1 51)(100 0 0 1 52)(101 0 0 1 53)(102 0 0 1 54)(103 0 0 1 55)(104 0 0 1 56)(105 0 0 1 57)(106 0 0 1 58)(107 0 0 1 59)(108 0 0 1 60)(109 0 0 1 61)(110 0 0 1 62)(111 0 0 1 63)(112 0 0 1 64)(113 0 0 1 65)(114 0 0 1 66)(115 0 0 1 67)(116 0 0 1 68)(117 0 0 1 69)(118 0 0 1 70)(119 0 0 1 71)(120 0 0 1 72)(121 0 0 1 73)(122 0 0 1 74)(123 0 0 1 75)(124 0 0 1 76)(125 0 0 1 77)(126 0 0 1 78)(127 0 0 1 79)(128 0 0 1 80)(129 0 0 1 81)(130 0 0 1 82)(131 0 0 1 83)(132 0 0 1 84)(133 0 0 1 85)(134 0 0 1 86)(135 0 0 1 87)(136 0 0 1 88)(137 0 0 1 89)(138 0 0 1 90)(139 0 0 1 91)(140 0 0 1 92)(141 0 0 1 93)(142 0 0 1 94)(143 0 0 1 95)(144 0 0 1 336)(145 0 0 1 337)(146 0 0 1 338)(147 0 0 1 339)(148 0 0 1 340)(149 0 0 1 341)(150 0 0 1 342)(151 0 0 1 343)(152 0 0 1 344)(153 0 0 1 345)(154 0 0 1 346)(155 0 0 1 347)(156 0 0 1 348)(157 0 0 1 349)(158 0 0 1 350)(159 0 0 1 351)(160 0 0 1 352)(161 0 0 1 353)(162 0 0 1 354)(163 0 0 1 355)(164 0 0 1 356)(165 0 0 1 357)(166 0 0 1 358)(167 0 0 1 359)(168 0 0 1 360)(169 0 0 1 361)(170 0 0 1 362)(171 0 0 1 363)(172 0 0 1 364)(173 0 0 1 365)(174 0 0 1 366)(175 0 0 1 367)(176 0 0 1 368)(177 0 0 1 369)(178 0 0 1 370)(179 0 0 1 371)(180 0 0 1 372)(181 0 0 1 373)(182 0 0 1 374)(183 0 0 1 375)(184 0 0 1 376)(185 0 0 1 377)(186 0 0 1 378)(187 0 0 1 379)(188 0 0 1 380)(189 0 0 1 381)(190 0 0 1 382)(191 0 0 1 383)(192 0 0 1 96)(193 0 0 1 97)(194 0 0 1 98)(195 0 0 1 99)(196 0 0 1 100)(197 0 0 1 101)(198 0 0 1 102)(199 0 0 1 103)(200 0 0 1 104)(201 0 0 1 105)(202 0 0 1 106)(203 0 0 1 107)(204 0 0 1 108)(205 0 0 1 109)(206 0 0 1 110)(207 0 0 1 111)(208 0 0 1 112)(209 0 0 1 113)(210 0 0 1 114)(211 0 0 1 115)(212 0 0 1 116)(213 0 0 1 117)(214 0 0 1 118)(215 0 0 1 119)(216 0 0 1 120)(217 0 0 1 121)(218 0 0 1 122)(219 0 0 1 123)(220 0 0 1 124)(221 0 0 1 125)(222 0 0 1 126)(223 0 0 1 127)(224 0 0 1 128)(225 0 0 1 129)(226 0 0 1 130)(227 0 0 1 131)(228 0 0 1 132)(229 0 0 1 133)(230 0 0 1 134)(231 0 0 1 135)(232 0 0 1 136)(233 0 0 1 137)(234 0 0 1 138)(235 0 0 1 139)(236 0 0 1 140)(237 0 0 1 141)(238 0 0 1 142)(239 0 0 1 143)(240 0 0 1 192)(241 0 0 1 193)(242 0 0 1 194)(243 0 0 1 195)(244 0 0 1 196)(245 0 0 1 197)(246 0 0 1 198)(247 0 0 1 199)(248 0 0 1 200)(249 0 0 1 201)(250 0 0 1 202)(251 0 0 1 203)(252 0 0 1 204)(253 0 0 1 205)(254 0 0 1 206)(255 0 0 1 207)(256 0 0 1 208)(257 0 0 1 209)(258 0 0 1 210)(259 0 0 1 211)(260 0 0 1 212)(261 0 0 1 213)(262 0 0 1 214)(263 0 0 1 215)(264 0 0 1 216)(265 0 0 1 217)(266 0 0 1 218)(267 0 0 1 219)(268 0 0 1 220)(269 0 0 1 221)(270 0 0 1 222)(271 0 0 1 223)(272 0 0 1 224)(273 0 0 1 225)(274 0 0 1 226)(275 0 0 1 227)(276 0 0 1 228)(277 0 0 1 229)(278 0 0 1 230)(279 0 0 1 231)(280 0 0 1 232)(281 0 0 1 233)(282 0 0 1 234)(283 0 0 1 235)(284 0 0 1 236)(285 0 0 1 237)(286 0 0 1 238)(287 0 0 1 239)(288 0 0 1 144)(289 0 0 1 145)(290 0 0 1 146)(291 0 0 1 147)(292 0 0 1 148)(293 0 0 1 149)(294 0 0 1 150)(295 0 0 1 151)(296 0 0 1 152)(297 0 0 1 153)(298 0 0 1 154)(299 0 0 1 155)(300 0 0 1 156)(301 0 0 1 157)(302 0 0 1 158)(303 0 0 1 159)(304 0 0 1 160)(305 0 0 1 161)(306 0 0 1 162)(307 0 0 1 163)(308 0 0 1 164)(309 0 0 1 165)(310 0 0 1 166)(311 0 0 1 167)(312 0 0 1 168)(313 0 0 1 169)(314 0 0 1 170)(315 0 0 1 171)(316 0 0 1 172)(317 0 0 1 173)(318 0 0 1 174)(319 0 0 1 175)(320 0 0 1 176)(321 0 0 1 177)(322 0 0 1 178)(323 0 0 1 179)(324 0 0 1 180)(325 0 0 1 181)(326 0 0 1 182)(327 0 0 1 183)(328 0 0 1 184)(329 0 0 1 185)(330 0 0 1 186)(331 0 0 1 187)(332 0 0 1 188)(333 0 0 1 189)(334 0 0 1 190)(335 0 0 1 191)(336 0 0 1 240)(337 0 0 1 241)(338 0 0 1 242)(339 0 0 1 243)(340 0 0 1 244)(341 0 0 1 245)(342 0 0 1 246)(343 0 0 1 247)(344 0 0 1 248)(345 0 0 1 249)(346 0 0 1 250)(347 0 0 1 251)(348 0 0 1 252)(349 0 0 1 253)(350 0 0 1 254)(351 0 0 1 255)(352 0 0 1 256)(353 0 0 1 257)(354 0 0 1 258)(355 0 0 1 259)(356 0 0 1 260)(357 0 0 1 261)(358 0 0 1 262)(359 0 0 1 263)(360 0 0 1 264)(361 0 0 1 265)(362 0 0 1 266)(363 0 0 1 267)(364 0 0 1 268)(365 0 0 1 269)(366 0 0 1 270)(367 0 0 1 271)(368 0 0 1 272)(369 0 0 1 273)(370 0 0 1 274)(371 0 0 1 275)(372 0 0 1 276)(373 0 0 1 277)(374 0 0 1 278)(375 0 0 1 279)(376 0 0 1 280)(377 0 0 1 281)(378 0 0 1 282)(379 0 0 1 283)(380 0 0 1 284)(381 0 0 1 285)(382 0 0 1 286)(383 0 0 1 287) The first entry () of the table is a header indicating (probe-type, number of channels). The meaning of the subsequent channel entries depends upon the probe type. The table must have an entry for each readout channel, usually 384. Entry values are space-separated. A single linefeed '\\n' terminates the file. Channel Entries By Type Type 0 (NP 1.0) : Channel ID, Bank number of the connected electrode, Reference ID index, AP band gain, LF band gain, AP highpass filter applied (1=ON) The reference ID values are {0=ext, 1=tip, [2..4]=on-shank-ref}. The on-shank ref electrodes are {192,576,960}. Type 21 (NP 2.0, single multiplexed shank) : Channel ID, Bank mask (logical OR of {1=bnk-0, 2=bnk-1, 4=bnk-2, 8=bnk-3}), Reference ID index, Electrode ID (range [0,1279]) The reference ID values are {0=ext, 1=tip, [2..5]=on-shank-ref}. The on-shank ref electrodes are {127,507,887,1251}. Type 24 (NP 2.0, 4-shank) : Channel ID, Shank ID, Bank ID, Reference ID index, Electrode ID (range [0,1279] on each shank) The reference ID values are {0=ext, [1..4]=tip{0,1,2,3}, [5..8]=on-shank-0, [9..12]=on-shank-1, [13..16]=on-shank-2, [17..20]=on-shank-3}. The on-shank ref electrodes of any shank are {127,511,895,1279}. C Code: Type 0 Default The default for a 3B type-0 probe is to select for each channel: bank=0, ref=0, APgain=500, LFgain=250, APfilter=1. void Default3B() { FILE *fo = fopen( \"Default3B.imro\", \"w\" ); // write the header fprintf( fo, \"(0,384)\" ); // write the rows (r) for( int r = 0; r < 384; ++r ) fprintf( fo, \"(%d 0 0 500 250 1)\", r ); // finish fprintf( fo, \"\\n\" ); fclose( fo ); } C Code: Type 0 Tetrodes Each channel will get the default reference, gain and filter settings {ref=0, APgain=500, LFgain=250, APfilter=1}. Starting at the tip, we'll select a block of four channels by setting them to bank-0. Then we'll skip the next four channels in bank-0 by setting them to bank-1. By repeating this we will create tetrodes that cover banks zero and one. The code will loop over sets of eight channels at a time. So there are 384/8 iterations of the loop. void Tetrodes3B() { FILE *fo = fopen( \"Tetrode_1shank.imro\", \"w\" ); // write the header fprintf( fo, \"(0,384)\" ); // write 8 rows (r) at a time for( int r = 0; r < 384/8; ++r ) { fprintf( fo, \"(%d 0 0 500 250 1)\", 8*r ); fprintf( fo, \"(%d 0 0 500 250 1)\", 8*r+1 ); fprintf( fo, \"(%d 0 0 500 250 1)\", 8*r+2 ); fprintf( fo, \"(%d 0 0 500 250 1)\", 8*r+3 ); fprintf( fo, \"(%d 1 0 500 250 1)\", 8*r+4 ); fprintf( fo, \"(%d 1 0 500 250 1)\", 8*r+5 ); fprintf( fo, \"(%d 1 0 500 250 1)\", 8*r+6 ); fprintf( fo, \"(%d 1 0 500 250 1)\", 8*r+7 ); } fprintf( fo, \"\\n\" ); fclose( fo ); } fin","title":"IMRO Table Anatomy"},{"location":"help/imroTables/#imro-table-anatomy","text":"IM ec R ead O ut tables are simple text files that describe how to configure each readout channel on an imec probe. Each type of probe may have its own set of parameters to access that type's special features. SpikeGLX has (or will have) a simple table editor for each probe type, but sometimes you may want to do something custom. This document shows how to write your own (*.imro) files. You can load your own files using the Load button in the SpikeGLX table editor. Note: When you load your own imro table file, you probably want to select default as your shank map. The default will automatically populate the shank(s) according to your imro table. You'll probably also want to select default for your channel map. The default channel map will order your graphs from the tip of the probe to the top (base) according to your imro table.","title":"IMRO Table Anatomy"},{"location":"help/imroTables/#text-examples","text":"Type 0: (0,384)(0 0 0 500 250 1)(1 0 0 500 250 1)(2 0 0 500 250 1)(3 0 0 500 250 1)(4 0 0 500 250 1)(5 0 0 500 250 1)(6 0 0 500 250 1)(7 0 0 500 250 1)(8 0 0 500 250 1)(9 0 0 500 250 1)(10 0 0 500 250 1)(11 0 0 500 250 1)(12 0 0 500 250 1)(13 0 0 500 250 1)(14 0 0 500 250 1)(15 0 0 500 250 1)(16 0 0 500 250 1)(17 0 0 500 250 1)(18 0 0 500 250 1)(19 0 0 500 250 1)(20 0 0 500 250 1)(21 0 0 500 250 1)(22 0 0 500 250 1)(23 0 0 500 250 1)(24 0 0 500 250 1)(25 0 0 500 250 1)(26 0 0 500 250 1)(27 0 0 500 250 1)(28 0 0 500 250 1)(29 0 0 500 250 1)(30 0 0 500 250 1)(31 0 0 500 250 1)(32 0 0 500 250 1)(33 0 0 500 250 1)(34 0 0 500 250 1)(35 0 0 500 250 1)(36 0 0 500 250 1)(37 0 0 500 250 1)(38 0 0 500 250 1)(39 0 0 500 250 1)(40 0 0 500 250 1)(41 0 0 500 250 1)(42 0 0 500 250 1)(43 0 0 500 250 1)(44 0 0 500 250 1)(45 0 0 500 250 1)(46 0 0 500 250 1)(47 0 0 500 250 1)(48 0 0 500 250 1)(49 0 0 500 250 1)(50 0 0 500 250 1)(51 0 0 500 250 1)(52 0 0 500 250 1)(53 0 0 500 250 1)(54 0 0 500 250 1)(55 0 0 500 250 1)(56 0 0 500 250 1)(57 0 0 500 250 1)(58 0 0 500 250 1)(59 0 0 500 250 1)(60 0 0 500 250 1)(61 0 0 500 250 1)(62 0 0 500 250 1)(63 0 0 500 250 1)(64 0 0 500 250 1)(65 0 0 500 250 1)(66 0 0 500 250 1)(67 0 0 500 250 1)(68 0 0 500 250 1)(69 0 0 500 250 1)(70 0 0 500 250 1)(71 0 0 500 250 1)(72 0 0 500 250 1)(73 0 0 500 250 1)(74 0 0 500 250 1)(75 0 0 500 250 1)(76 0 0 500 250 1)(77 0 0 500 250 1)(78 0 0 500 250 1)(79 0 0 500 250 1)(80 0 0 500 250 1)(81 0 0 500 250 1)(82 0 0 500 250 1)(83 0 0 500 250 1)(84 0 0 500 250 1)(85 0 0 500 250 1)(86 0 0 500 250 1)(87 0 0 500 250 1)(88 0 0 500 250 1)(89 0 0 500 250 1)(90 0 0 500 250 1)(91 0 0 500 250 1)(92 0 0 500 250 1)(93 0 0 500 250 1)(94 0 0 500 250 1)(95 0 0 500 250 1)(96 0 0 500 250 1)(97 0 0 500 250 1)(98 0 0 500 250 1)(99 0 0 500 250 1)(100 0 0 500 250 1)(101 0 0 500 250 1)(102 0 0 500 250 1)(103 0 0 500 250 1)(104 0 0 500 250 1)(105 0 0 500 250 1)(106 0 0 500 250 1)(107 0 0 500 250 1)(108 0 0 500 250 1)(109 0 0 500 250 1)(110 0 0 500 250 1)(111 0 0 500 250 1)(112 0 0 500 250 1)(113 0 0 500 250 1)(114 0 0 500 250 1)(115 0 0 500 250 1)(116 0 0 500 250 1)(117 0 0 500 250 1)(118 0 0 500 250 1)(119 0 0 500 250 1)(120 0 0 500 250 1)(121 0 0 500 250 1)(122 0 0 500 250 1)(123 0 0 500 250 1)(124 0 0 500 250 1)(125 0 0 500 250 1)(126 0 0 500 250 1)(127 0 0 500 250 1)(128 0 0 500 250 1)(129 0 0 500 250 1)(130 0 0 500 250 1)(131 0 0 500 250 1)(132 0 0 500 250 1)(133 0 0 500 250 1)(134 0 0 500 250 1)(135 0 0 500 250 1)(136 0 0 500 250 1)(137 0 0 500 250 1)(138 0 0 500 250 1)(139 0 0 500 250 1)(140 0 0 500 250 1)(141 0 0 500 250 1)(142 0 0 500 250 1)(143 0 0 500 250 1)(144 0 0 500 250 1)(145 0 0 500 250 1)(146 0 0 500 250 1)(147 0 0 500 250 1)(148 0 0 500 250 1)(149 0 0 500 250 1)(150 0 0 500 250 1)(151 0 0 500 250 1)(152 0 0 500 250 1)(153 0 0 500 250 1)(154 0 0 500 250 1)(155 0 0 500 250 1)(156 0 0 500 250 1)(157 0 0 500 250 1)(158 0 0 500 250 1)(159 0 0 500 250 1)(160 0 0 500 250 1)(161 0 0 500 250 1)(162 0 0 500 250 1)(163 0 0 500 250 1)(164 0 0 500 250 1)(165 0 0 500 250 1)(166 0 0 500 250 1)(167 0 0 500 250 1)(168 0 0 500 250 1)(169 0 0 500 250 1)(170 0 0 500 250 1)(171 0 0 500 250 1)(172 0 0 500 250 1)(173 0 0 500 250 1)(174 0 0 500 250 1)(175 0 0 500 250 1)(176 0 0 500 250 1)(177 0 0 500 250 1)(178 0 0 500 250 1)(179 0 0 500 250 1)(180 0 0 500 250 1)(181 0 0 500 250 1)(182 0 0 500 250 1)(183 0 0 500 250 1)(184 0 0 500 250 1)(185 0 0 500 250 1)(186 0 0 500 250 1)(187 0 0 500 250 1)(188 0 0 500 250 1)(189 0 0 500 250 1)(190 0 0 500 250 1)(191 0 0 500 250 1)(192 0 0 500 250 1)(193 0 0 500 250 1)(194 0 0 500 250 1)(195 0 0 500 250 1)(196 0 0 500 250 1)(197 0 0 500 250 1)(198 0 0 500 250 1)(199 0 0 500 250 1)(200 0 0 500 250 1)(201 0 0 500 250 1)(202 0 0 500 250 1)(203 0 0 500 250 1)(204 0 0 500 250 1)(205 0 0 500 250 1)(206 0 0 500 250 1)(207 0 0 500 250 1)(208 0 0 500 250 1)(209 0 0 500 250 1)(210 0 0 500 250 1)(211 0 0 500 250 1)(212 0 0 500 250 1)(213 0 0 500 250 1)(214 0 0 500 250 1)(215 0 0 500 250 1)(216 0 0 500 250 1)(217 0 0 500 250 1)(218 0 0 500 250 1)(219 0 0 500 250 1)(220 0 0 500 250 1)(221 0 0 500 250 1)(222 0 0 500 250 1)(223 0 0 500 250 1)(224 0 0 500 250 1)(225 0 0 500 250 1)(226 0 0 500 250 1)(227 0 0 500 250 1)(228 0 0 500 250 1)(229 0 0 500 250 1)(230 0 0 500 250 1)(231 0 0 500 250 1)(232 0 0 500 250 1)(233 0 0 500 250 1)(234 0 0 500 250 1)(235 0 0 500 250 1)(236 0 0 500 250 1)(237 0 0 500 250 1)(238 0 0 500 250 1)(239 0 0 500 250 1)(240 0 0 500 250 1)(241 0 0 500 250 1)(242 0 0 500 250 1)(243 0 0 500 250 1)(244 0 0 500 250 1)(245 0 0 500 250 1)(246 0 0 500 250 1)(247 0 0 500 250 1)(248 0 0 500 250 1)(249 0 0 500 250 1)(250 0 0 500 250 1)(251 0 0 500 250 1)(252 0 0 500 250 1)(253 0 0 500 250 1)(254 0 0 500 250 1)(255 0 0 500 250 1)(256 0 0 500 250 1)(257 0 0 500 250 1)(258 0 0 500 250 1)(259 0 0 500 250 1)(260 0 0 500 250 1)(261 0 0 500 250 1)(262 0 0 500 250 1)(263 0 0 500 250 1)(264 0 0 500 250 1)(265 0 0 500 250 1)(266 0 0 500 250 1)(267 0 0 500 250 1)(268 0 0 500 250 1)(269 0 0 500 250 1)(270 0 0 500 250 1)(271 0 0 500 250 1)(272 0 0 500 250 1)(273 0 0 500 250 1)(274 0 0 500 250 1)(275 0 0 500 250 1)(276 0 0 500 250 1)(277 0 0 500 250 1)(278 0 0 500 250 1)(279 0 0 500 250 1)(280 0 0 500 250 1)(281 0 0 500 250 1)(282 0 0 500 250 1)(283 0 0 500 250 1)(284 0 0 500 250 1)(285 0 0 500 250 1)(286 0 0 500 250 1)(287 0 0 500 250 1)(288 0 0 500 250 1)(289 0 0 500 250 1)(290 0 0 500 250 1)(291 0 0 500 250 1)(292 0 0 500 250 1)(293 0 0 500 250 1)(294 0 0 500 250 1)(295 0 0 500 250 1)(296 0 0 500 250 1)(297 0 0 500 250 1)(298 0 0 500 250 1)(299 0 0 500 250 1)(300 0 0 500 250 1)(301 0 0 500 250 1)(302 0 0 500 250 1)(303 0 0 500 250 1)(304 0 0 500 250 1)(305 0 0 500 250 1)(306 0 0 500 250 1)(307 0 0 500 250 1)(308 0 0 500 250 1)(309 0 0 500 250 1)(310 0 0 500 250 1)(311 0 0 500 250 1)(312 0 0 500 250 1)(313 0 0 500 250 1)(314 0 0 500 250 1)(315 0 0 500 250 1)(316 0 0 500 250 1)(317 0 0 500 250 1)(318 0 0 500 250 1)(319 0 0 500 250 1)(320 0 0 500 250 1)(321 0 0 500 250 1)(322 0 0 500 250 1)(323 0 0 500 250 1)(324 0 0 500 250 1)(325 0 0 500 250 1)(326 0 0 500 250 1)(327 0 0 500 250 1)(328 0 0 500 250 1)(329 0 0 500 250 1)(330 0 0 500 250 1)(331 0 0 500 250 1)(332 0 0 500 250 1)(333 0 0 500 250 1)(334 0 0 500 250 1)(335 0 0 500 250 1)(336 0 0 500 250 1)(337 0 0 500 250 1)(338 0 0 500 250 1)(339 0 0 500 250 1)(340 0 0 500 250 1)(341 0 0 500 250 1)(342 0 0 500 250 1)(343 0 0 500 250 1)(344 0 0 500 250 1)(345 0 0 500 250 1)(346 0 0 500 250 1)(347 0 0 500 250 1)(348 0 0 500 250 1)(349 0 0 500 250 1)(350 0 0 500 250 1)(351 0 0 500 250 1)(352 0 0 500 250 1)(353 0 0 500 250 1)(354 0 0 500 250 1)(355 0 0 500 250 1)(356 0 0 500 250 1)(357 0 0 500 250 1)(358 0 0 500 250 1)(359 0 0 500 250 1)(360 0 0 500 250 1)(361 0 0 500 250 1)(362 0 0 500 250 1)(363 0 0 500 250 1)(364 0 0 500 250 1)(365 0 0 500 250 1)(366 0 0 500 250 1)(367 0 0 500 250 1)(368 0 0 500 250 1)(369 0 0 500 250 1)(370 0 0 500 250 1)(371 0 0 500 250 1)(372 0 0 500 250 1)(373 0 0 500 250 1)(374 0 0 500 250 1)(375 0 0 500 250 1)(376 0 0 500 250 1)(377 0 0 500 250 1)(378 0 0 500 250 1)(379 0 0 500 250 1)(380 0 0 500 250 1)(381 0 0 500 250 1)(382 0 0 500 250 1)(383 0 0 500 250 1) Type 21: (21,384)(0 1 0 0)(1 1 0 1)(2 1 0 2)(3 1 0 3)(4 1 0 4)(5 1 0 5)(6 1 0 6)(7 1 0 7)(8 1 0 8)(9 1 0 9)(10 1 0 10)(11 1 0 11)(12 1 0 12)(13 1 0 13)(14 1 0 14)(15 1 0 15)(16 1 0 16)(17 1 0 17)(18 1 0 18)(19 1 0 19)(20 1 0 20)(21 1 0 21)(22 1 0 22)(23 1 0 23)(24 1 0 24)(25 1 0 25)(26 1 0 26)(27 1 0 27)(28 1 0 28)(29 1 0 29)(30 1 0 30)(31 1 0 31)(32 1 0 32)(33 1 0 33)(34 1 0 34)(35 1 0 35)(36 1 0 36)(37 1 0 37)(38 1 0 38)(39 1 0 39)(40 1 0 40)(41 1 0 41)(42 1 0 42)(43 1 0 43)(44 1 0 44)(45 1 0 45)(46 1 0 46)(47 1 0 47)(48 1 0 48)(49 1 0 49)(50 1 0 50)(51 1 0 51)(52 1 0 52)(53 1 0 53)(54 1 0 54)(55 1 0 55)(56 1 0 56)(57 1 0 57)(58 1 0 58)(59 1 0 59)(60 1 0 60)(61 1 0 61)(62 1 0 62)(63 1 0 63)(64 1 0 64)(65 1 0 65)(66 1 0 66)(67 1 0 67)(68 1 0 68)(69 1 0 69)(70 1 0 70)(71 1 0 71)(72 1 0 72)(73 1 0 73)(74 1 0 74)(75 1 0 75)(76 1 0 76)(77 1 0 77)(78 1 0 78)(79 1 0 79)(80 1 0 80)(81 1 0 81)(82 1 0 82)(83 1 0 83)(84 1 0 84)(85 1 0 85)(86 1 0 86)(87 1 0 87)(88 1 0 88)(89 1 0 89)(90 1 0 90)(91 1 0 91)(92 1 0 92)(93 1 0 93)(94 1 0 94)(95 1 0 95)(96 1 0 96)(97 1 0 97)(98 1 0 98)(99 1 0 99)(100 1 0 100)(101 1 0 101)(102 1 0 102)(103 1 0 103)(104 1 0 104)(105 1 0 105)(106 1 0 106)(107 1 0 107)(108 1 0 108)(109 1 0 109)(110 1 0 110)(111 1 0 111)(112 1 0 112)(113 1 0 113)(114 1 0 114)(115 1 0 115)(116 1 0 116)(117 1 0 117)(118 1 0 118)(119 1 0 119)(120 1 0 120)(121 1 0 121)(122 1 0 122)(123 1 0 123)(124 1 0 124)(125 1 0 125)(126 1 0 126)(127 1 0 127)(128 1 0 128)(129 1 0 129)(130 1 0 130)(131 1 0 131)(132 1 0 132)(133 1 0 133)(134 1 0 134)(135 1 0 135)(136 1 0 136)(137 1 0 137)(138 1 0 138)(139 1 0 139)(140 1 0 140)(141 1 0 141)(142 1 0 142)(143 1 0 143)(144 1 0 144)(145 1 0 145)(146 1 0 146)(147 1 0 147)(148 1 0 148)(149 1 0 149)(150 1 0 150)(151 1 0 151)(152 1 0 152)(153 1 0 153)(154 1 0 154)(155 1 0 155)(156 1 0 156)(157 1 0 157)(158 1 0 158)(159 1 0 159)(160 1 0 160)(161 1 0 161)(162 1 0 162)(163 1 0 163)(164 1 0 164)(165 1 0 165)(166 1 0 166)(167 1 0 167)(168 1 0 168)(169 1 0 169)(170 1 0 170)(171 1 0 171)(172 1 0 172)(173 1 0 173)(174 1 0 174)(175 1 0 175)(176 1 0 176)(177 1 0 177)(178 1 0 178)(179 1 0 179)(180 1 0 180)(181 1 0 181)(182 1 0 182)(183 1 0 183)(184 1 0 184)(185 1 0 185)(186 1 0 186)(187 1 0 187)(188 1 0 188)(189 1 0 189)(190 1 0 190)(191 1 0 191)(192 1 0 192)(193 1 0 193)(194 1 0 194)(195 1 0 195)(196 1 0 196)(197 1 0 197)(198 1 0 198)(199 1 0 199)(200 1 0 200)(201 1 0 201)(202 1 0 202)(203 1 0 203)(204 1 0 204)(205 1 0 205)(206 1 0 206)(207 1 0 207)(208 1 0 208)(209 1 0 209)(210 1 0 210)(211 1 0 211)(212 1 0 212)(213 1 0 213)(214 1 0 214)(215 1 0 215)(216 1 0 216)(217 1 0 217)(218 1 0 218)(219 1 0 219)(220 1 0 220)(221 1 0 221)(222 1 0 222)(223 1 0 223)(224 1 0 224)(225 1 0 225)(226 1 0 226)(227 1 0 227)(228 1 0 228)(229 1 0 229)(230 1 0 230)(231 1 0 231)(232 1 0 232)(233 1 0 233)(234 1 0 234)(235 1 0 235)(236 1 0 236)(237 1 0 237)(238 1 0 238)(239 1 0 239)(240 1 0 240)(241 1 0 241)(242 1 0 242)(243 1 0 243)(244 1 0 244)(245 1 0 245)(246 1 0 246)(247 1 0 247)(248 1 0 248)(249 1 0 249)(250 1 0 250)(251 1 0 251)(252 1 0 252)(253 1 0 253)(254 1 0 254)(255 1 0 255)(256 1 0 256)(257 1 0 257)(258 1 0 258)(259 1 0 259)(260 1 0 260)(261 1 0 261)(262 1 0 262)(263 1 0 263)(264 1 0 264)(265 1 0 265)(266 1 0 266)(267 1 0 267)(268 1 0 268)(269 1 0 269)(270 1 0 270)(271 1 0 271)(272 1 0 272)(273 1 0 273)(274 1 0 274)(275 1 0 275)(276 1 0 276)(277 1 0 277)(278 1 0 278)(279 1 0 279)(280 1 0 280)(281 1 0 281)(282 1 0 282)(283 1 0 283)(284 1 0 284)(285 1 0 285)(286 1 0 286)(287 1 0 287)(288 1 0 288)(289 1 0 289)(290 1 0 290)(291 1 0 291)(292 1 0 292)(293 1 0 293)(294 1 0 294)(295 1 0 295)(296 1 0 296)(297 1 0 297)(298 1 0 298)(299 1 0 299)(300 1 0 300)(301 1 0 301)(302 1 0 302)(303 1 0 303)(304 1 0 304)(305 1 0 305)(306 1 0 306)(307 1 0 307)(308 1 0 308)(309 1 0 309)(310 1 0 310)(311 1 0 311)(312 1 0 312)(313 1 0 313)(314 1 0 314)(315 1 0 315)(316 1 0 316)(317 1 0 317)(318 1 0 318)(319 1 0 319)(320 1 0 320)(321 1 0 321)(322 1 0 322)(323 1 0 323)(324 1 0 324)(325 1 0 325)(326 1 0 326)(327 1 0 327)(328 1 0 328)(329 1 0 329)(330 1 0 330)(331 1 0 331)(332 1 0 332)(333 1 0 333)(334 1 0 334)(335 1 0 335)(336 1 0 336)(337 1 0 337)(338 1 0 338)(339 1 0 339)(340 1 0 340)(341 1 0 341)(342 1 0 342)(343 1 0 343)(344 1 0 344)(345 1 0 345)(346 1 0 346)(347 1 0 347)(348 1 0 348)(349 1 0 349)(350 1 0 350)(351 1 0 351)(352 1 0 352)(353 1 0 353)(354 1 0 354)(355 1 0 355)(356 1 0 356)(357 1 0 357)(358 1 0 358)(359 1 0 359)(360 1 0 360)(361 1 0 361)(362 1 0 362)(363 1 0 363)(364 1 0 364)(365 1 0 365)(366 1 0 366)(367 1 0 367)(368 1 0 368)(369 1 0 369)(370 1 0 370)(371 1 0 371)(372 1 0 372)(373 1 0 373)(374 1 0 374)(375 1 0 375)(376 1 0 376)(377 1 0 377)(378 1 0 378)(379 1 0 379)(380 1 0 380)(381 1 0 381)(382 1 0 382)(383 1 0 383) Type 24: (24,384)(0 0 0 1 0)(1 0 0 1 1)(2 0 0 1 2)(3 0 0 1 3)(4 0 0 1 4)(5 0 0 1 5)(6 0 0 1 6)(7 0 0 1 7)(8 0 0 1 8)(9 0 0 1 9)(10 0 0 1 10)(11 0 0 1 11)(12 0 0 1 12)(13 0 0 1 13)(14 0 0 1 14)(15 0 0 1 15)(16 0 0 1 16)(17 0 0 1 17)(18 0 0 1 18)(19 0 0 1 19)(20 0 0 1 20)(21 0 0 1 21)(22 0 0 1 22)(23 0 0 1 23)(24 0 0 1 24)(25 0 0 1 25)(26 0 0 1 26)(27 0 0 1 27)(28 0 0 1 28)(29 0 0 1 29)(30 0 0 1 30)(31 0 0 1 31)(32 0 0 1 32)(33 0 0 1 33)(34 0 0 1 34)(35 0 0 1 35)(36 0 0 1 36)(37 0 0 1 37)(38 0 0 1 38)(39 0 0 1 39)(40 0 0 1 40)(41 0 0 1 41)(42 0 0 1 42)(43 0 0 1 43)(44 0 0 1 44)(45 0 0 1 45)(46 0 0 1 46)(47 0 0 1 47)(48 0 0 1 288)(49 0 0 1 289)(50 0 0 1 290)(51 0 0 1 291)(52 0 0 1 292)(53 0 0 1 293)(54 0 0 1 294)(55 0 0 1 295)(56 0 0 1 296)(57 0 0 1 297)(58 0 0 1 298)(59 0 0 1 299)(60 0 0 1 300)(61 0 0 1 301)(62 0 0 1 302)(63 0 0 1 303)(64 0 0 1 304)(65 0 0 1 305)(66 0 0 1 306)(67 0 0 1 307)(68 0 0 1 308)(69 0 0 1 309)(70 0 0 1 310)(71 0 0 1 311)(72 0 0 1 312)(73 0 0 1 313)(74 0 0 1 314)(75 0 0 1 315)(76 0 0 1 316)(77 0 0 1 317)(78 0 0 1 318)(79 0 0 1 319)(80 0 0 1 320)(81 0 0 1 321)(82 0 0 1 322)(83 0 0 1 323)(84 0 0 1 324)(85 0 0 1 325)(86 0 0 1 326)(87 0 0 1 327)(88 0 0 1 328)(89 0 0 1 329)(90 0 0 1 330)(91 0 0 1 331)(92 0 0 1 332)(93 0 0 1 333)(94 0 0 1 334)(95 0 0 1 335)(96 0 0 1 48)(97 0 0 1 49)(98 0 0 1 50)(99 0 0 1 51)(100 0 0 1 52)(101 0 0 1 53)(102 0 0 1 54)(103 0 0 1 55)(104 0 0 1 56)(105 0 0 1 57)(106 0 0 1 58)(107 0 0 1 59)(108 0 0 1 60)(109 0 0 1 61)(110 0 0 1 62)(111 0 0 1 63)(112 0 0 1 64)(113 0 0 1 65)(114 0 0 1 66)(115 0 0 1 67)(116 0 0 1 68)(117 0 0 1 69)(118 0 0 1 70)(119 0 0 1 71)(120 0 0 1 72)(121 0 0 1 73)(122 0 0 1 74)(123 0 0 1 75)(124 0 0 1 76)(125 0 0 1 77)(126 0 0 1 78)(127 0 0 1 79)(128 0 0 1 80)(129 0 0 1 81)(130 0 0 1 82)(131 0 0 1 83)(132 0 0 1 84)(133 0 0 1 85)(134 0 0 1 86)(135 0 0 1 87)(136 0 0 1 88)(137 0 0 1 89)(138 0 0 1 90)(139 0 0 1 91)(140 0 0 1 92)(141 0 0 1 93)(142 0 0 1 94)(143 0 0 1 95)(144 0 0 1 336)(145 0 0 1 337)(146 0 0 1 338)(147 0 0 1 339)(148 0 0 1 340)(149 0 0 1 341)(150 0 0 1 342)(151 0 0 1 343)(152 0 0 1 344)(153 0 0 1 345)(154 0 0 1 346)(155 0 0 1 347)(156 0 0 1 348)(157 0 0 1 349)(158 0 0 1 350)(159 0 0 1 351)(160 0 0 1 352)(161 0 0 1 353)(162 0 0 1 354)(163 0 0 1 355)(164 0 0 1 356)(165 0 0 1 357)(166 0 0 1 358)(167 0 0 1 359)(168 0 0 1 360)(169 0 0 1 361)(170 0 0 1 362)(171 0 0 1 363)(172 0 0 1 364)(173 0 0 1 365)(174 0 0 1 366)(175 0 0 1 367)(176 0 0 1 368)(177 0 0 1 369)(178 0 0 1 370)(179 0 0 1 371)(180 0 0 1 372)(181 0 0 1 373)(182 0 0 1 374)(183 0 0 1 375)(184 0 0 1 376)(185 0 0 1 377)(186 0 0 1 378)(187 0 0 1 379)(188 0 0 1 380)(189 0 0 1 381)(190 0 0 1 382)(191 0 0 1 383)(192 0 0 1 96)(193 0 0 1 97)(194 0 0 1 98)(195 0 0 1 99)(196 0 0 1 100)(197 0 0 1 101)(198 0 0 1 102)(199 0 0 1 103)(200 0 0 1 104)(201 0 0 1 105)(202 0 0 1 106)(203 0 0 1 107)(204 0 0 1 108)(205 0 0 1 109)(206 0 0 1 110)(207 0 0 1 111)(208 0 0 1 112)(209 0 0 1 113)(210 0 0 1 114)(211 0 0 1 115)(212 0 0 1 116)(213 0 0 1 117)(214 0 0 1 118)(215 0 0 1 119)(216 0 0 1 120)(217 0 0 1 121)(218 0 0 1 122)(219 0 0 1 123)(220 0 0 1 124)(221 0 0 1 125)(222 0 0 1 126)(223 0 0 1 127)(224 0 0 1 128)(225 0 0 1 129)(226 0 0 1 130)(227 0 0 1 131)(228 0 0 1 132)(229 0 0 1 133)(230 0 0 1 134)(231 0 0 1 135)(232 0 0 1 136)(233 0 0 1 137)(234 0 0 1 138)(235 0 0 1 139)(236 0 0 1 140)(237 0 0 1 141)(238 0 0 1 142)(239 0 0 1 143)(240 0 0 1 192)(241 0 0 1 193)(242 0 0 1 194)(243 0 0 1 195)(244 0 0 1 196)(245 0 0 1 197)(246 0 0 1 198)(247 0 0 1 199)(248 0 0 1 200)(249 0 0 1 201)(250 0 0 1 202)(251 0 0 1 203)(252 0 0 1 204)(253 0 0 1 205)(254 0 0 1 206)(255 0 0 1 207)(256 0 0 1 208)(257 0 0 1 209)(258 0 0 1 210)(259 0 0 1 211)(260 0 0 1 212)(261 0 0 1 213)(262 0 0 1 214)(263 0 0 1 215)(264 0 0 1 216)(265 0 0 1 217)(266 0 0 1 218)(267 0 0 1 219)(268 0 0 1 220)(269 0 0 1 221)(270 0 0 1 222)(271 0 0 1 223)(272 0 0 1 224)(273 0 0 1 225)(274 0 0 1 226)(275 0 0 1 227)(276 0 0 1 228)(277 0 0 1 229)(278 0 0 1 230)(279 0 0 1 231)(280 0 0 1 232)(281 0 0 1 233)(282 0 0 1 234)(283 0 0 1 235)(284 0 0 1 236)(285 0 0 1 237)(286 0 0 1 238)(287 0 0 1 239)(288 0 0 1 144)(289 0 0 1 145)(290 0 0 1 146)(291 0 0 1 147)(292 0 0 1 148)(293 0 0 1 149)(294 0 0 1 150)(295 0 0 1 151)(296 0 0 1 152)(297 0 0 1 153)(298 0 0 1 154)(299 0 0 1 155)(300 0 0 1 156)(301 0 0 1 157)(302 0 0 1 158)(303 0 0 1 159)(304 0 0 1 160)(305 0 0 1 161)(306 0 0 1 162)(307 0 0 1 163)(308 0 0 1 164)(309 0 0 1 165)(310 0 0 1 166)(311 0 0 1 167)(312 0 0 1 168)(313 0 0 1 169)(314 0 0 1 170)(315 0 0 1 171)(316 0 0 1 172)(317 0 0 1 173)(318 0 0 1 174)(319 0 0 1 175)(320 0 0 1 176)(321 0 0 1 177)(322 0 0 1 178)(323 0 0 1 179)(324 0 0 1 180)(325 0 0 1 181)(326 0 0 1 182)(327 0 0 1 183)(328 0 0 1 184)(329 0 0 1 185)(330 0 0 1 186)(331 0 0 1 187)(332 0 0 1 188)(333 0 0 1 189)(334 0 0 1 190)(335 0 0 1 191)(336 0 0 1 240)(337 0 0 1 241)(338 0 0 1 242)(339 0 0 1 243)(340 0 0 1 244)(341 0 0 1 245)(342 0 0 1 246)(343 0 0 1 247)(344 0 0 1 248)(345 0 0 1 249)(346 0 0 1 250)(347 0 0 1 251)(348 0 0 1 252)(349 0 0 1 253)(350 0 0 1 254)(351 0 0 1 255)(352 0 0 1 256)(353 0 0 1 257)(354 0 0 1 258)(355 0 0 1 259)(356 0 0 1 260)(357 0 0 1 261)(358 0 0 1 262)(359 0 0 1 263)(360 0 0 1 264)(361 0 0 1 265)(362 0 0 1 266)(363 0 0 1 267)(364 0 0 1 268)(365 0 0 1 269)(366 0 0 1 270)(367 0 0 1 271)(368 0 0 1 272)(369 0 0 1 273)(370 0 0 1 274)(371 0 0 1 275)(372 0 0 1 276)(373 0 0 1 277)(374 0 0 1 278)(375 0 0 1 279)(376 0 0 1 280)(377 0 0 1 281)(378 0 0 1 282)(379 0 0 1 283)(380 0 0 1 284)(381 0 0 1 285)(382 0 0 1 286)(383 0 0 1 287) The first entry () of the table is a header indicating (probe-type, number of channels). The meaning of the subsequent channel entries depends upon the probe type. The table must have an entry for each readout channel, usually 384. Entry values are space-separated. A single linefeed '\\n' terminates the file.","title":"Text Examples"},{"location":"help/imroTables/#channel-entries-by-type","text":"Type 0 (NP 1.0) : Channel ID, Bank number of the connected electrode, Reference ID index, AP band gain, LF band gain, AP highpass filter applied (1=ON) The reference ID values are {0=ext, 1=tip, [2..4]=on-shank-ref}. The on-shank ref electrodes are {192,576,960}. Type 21 (NP 2.0, single multiplexed shank) : Channel ID, Bank mask (logical OR of {1=bnk-0, 2=bnk-1, 4=bnk-2, 8=bnk-3}), Reference ID index, Electrode ID (range [0,1279]) The reference ID values are {0=ext, 1=tip, [2..5]=on-shank-ref}. The on-shank ref electrodes are {127,507,887,1251}. Type 24 (NP 2.0, 4-shank) : Channel ID, Shank ID, Bank ID, Reference ID index, Electrode ID (range [0,1279] on each shank) The reference ID values are {0=ext, [1..4]=tip{0,1,2,3}, [5..8]=on-shank-0, [9..12]=on-shank-1, [13..16]=on-shank-2, [17..20]=on-shank-3}. The on-shank ref electrodes of any shank are {127,511,895,1279}.","title":"Channel Entries By Type"},{"location":"help/imroTables/#c-code-type-0-default","text":"The default for a 3B type-0 probe is to select for each channel: bank=0, ref=0, APgain=500, LFgain=250, APfilter=1. void Default3B() { FILE *fo = fopen( \"Default3B.imro\", \"w\" ); // write the header fprintf( fo, \"(0,384)\" ); // write the rows (r) for( int r = 0; r < 384; ++r ) fprintf( fo, \"(%d 0 0 500 250 1)\", r ); // finish fprintf( fo, \"\\n\" ); fclose( fo ); }","title":"C Code: Type 0 Default"},{"location":"help/imroTables/#c-code-type-0-tetrodes","text":"Each channel will get the default reference, gain and filter settings {ref=0, APgain=500, LFgain=250, APfilter=1}. Starting at the tip, we'll select a block of four channels by setting them to bank-0. Then we'll skip the next four channels in bank-0 by setting them to bank-1. By repeating this we will create tetrodes that cover banks zero and one. The code will loop over sets of eight channels at a time. So there are 384/8 iterations of the loop. void Tetrodes3B() { FILE *fo = fopen( \"Tetrode_1shank.imro\", \"w\" ); // write the header fprintf( fo, \"(0,384)\" ); // write 8 rows (r) at a time for( int r = 0; r < 384/8; ++r ) { fprintf( fo, \"(%d 0 0 500 250 1)\", 8*r ); fprintf( fo, \"(%d 0 0 500 250 1)\", 8*r+1 ); fprintf( fo, \"(%d 0 0 500 250 1)\", 8*r+2 ); fprintf( fo, \"(%d 0 0 500 250 1)\", 8*r+3 ); fprintf( fo, \"(%d 1 0 500 250 1)\", 8*r+4 ); fprintf( fo, \"(%d 1 0 500 250 1)\", 8*r+5 ); fprintf( fo, \"(%d 1 0 500 250 1)\", 8*r+6 ); fprintf( fo, \"(%d 1 0 500 250 1)\", 8*r+7 ); } fprintf( fo, \"\\n\" ); fclose( fo ); } fin","title":"C Code: Type 0 Tetrodes"},{"location":"help/parsing/","text":"Parsing Data Files Directory and file names Imec probe filenames 3A probe filename has no index number after .imec. , e.g. myrun_g0_t0.imec.ap.meta . All later phases have a probe index, e.g. myrun_g0_t0.imec0.ap.meta . CatGT Tip : Use option -prb_3A for 3A data, and DON'T use -prb=list ! Run folder Prior to SpikeGLX version 20190214 there were no run folders. Rather, all datafiles output from a run were placed directly into the current Data Directory . Version 20190214 and later first create a Run Folder within the data directory. The run folder holds all output from that run, and is named with a g-index, e.g. myrun_g0 . CatGT Tip : Use option -no_run_fld for runs before version 20190214. Probe folders Xilinx-based 3A, 3B1 These phases are single-probe. No option for probe folders is provided. PXI-based 3B2, 2.0 Version 20190214 and later provide a Folder per probe option on the Save tab: If not selected, no probe folders are created. Rather, all output files for a run are saved into its Run Folder . If selected (checked): All nidq datafiles are saved directly into the Run Folder . A separate Probe Folder for each imec probe is first created in the run folder. The probe folder holds all output from that probe, and is named with both g- and probe-indices, e.g. myrun_g0_imec6 . CatGT Tip : Use option -prb_fld if option selected. Multidrive output PXI-based 3B2, 2.0 Before the multidrive option was introduced SpikeGLX let you specify at most one data directory to hold all your run output folders and files. As of version 20200309 , there is still a main data directory, but now you can check a box to enable the splitting of runs across additional drives/directories to access greater storage capacity when doing very long runs or when using many probes. Modulo rule The rule for distributing run output into several data directories is this: As always, the (N) probes have logical indices [0..N-1] . The main data directory is dir-0 . The set of all (M) directories, including the main one are enumerated [dir-0..dir-M-1] . NI output is always sent to dir-0. Probe-j output is sent to dir-(j modulo M) . Within each dir-k SpikeGLX will create a run folder and applicable probe folders according to the same rules that apply for a single main data directory. A Modulo B means \"take the remainder of dividing integers A/B \". Modulo is often written mod and is written % in C/C++ and Python code. For example, suppose these parameters: dir-0 = D:\\Data dir-1 = E:\\DataB dir-2 = G:\\DataC runname = myRun folder per run is enabled Example output would go here: NI: D:\\Data\\myrun\\myrun_g0_t0.ni.bin(.meta) Imec0: D:\\Data\\myrun\\myrun_g0_imec0\\myrun_g0_t0.imec0.ap.bin(.meta) Imec3: D:\\Data\\myrun\\myrun_g0_imec3\\myrun_g0_t0.imec3.ap.bin(.meta) Imec4: E:\\DataB\\myrun\\myrun_g0_imec4\\myrun_g0_t0.imec4.ap.bin(.meta) Imec8: G:\\DataC\\myrun\\myrun_g0_imec8\\myrun_g0_t0.imec8.ap.bin(.meta) New offline behaviors When multidrive output is enabled, a run's files are distributed over several directories. The SpikeGLX features and tools that work on sets of run files are affected as follows: FileViewer/Link : To link files in the same run, that is, to show them and scroll them together, you first open any binary file from a run, then choose File/Link in the Viewer window. In the Link dialog you list which other streams in this run to open and link together. This feature only knows how to search for and link other streams that reside in the same parent data-dir/run-folder as the open file. If the multidrive option had split the run, you will only be able to link the streams that live together in one of the split run folders. You'll have to separately view and link data that live in separate data directories. Tools/Sample Rates From Run : This dialog still looks the same. You select any binary file from a run and you have an option to calibrate just that data stream, or all of the streams it can find in the same run folder. If the multidrive option had split the run, this tool will only be able to locate and calibrate probes it can find in the same split run folder as the selected binary. That is, you'll have to repeat this process once for each separate data directory. CatGT : Tell CatGT which probes to process by pointing to a data directory -dir=myDir and listing the probes you want to process, say -prb=0:3 . In CatGT version 1.2.7 and earlier, if any probe is missing from that directory, the run stops and logs a missing file error. As of CatGT version 1.2.8 you can add option -prb_miss_ok telling CatGT to skip missing probes and continue with the next one it finds in that directory. Note that you will have to make a separate command line for each data directory, but each command line can conveniently list all of the probes in the run. You don't have to figure out the modulo rule for each directory. TPrime : Unaffected. All of the input and outfile files {tostream, fromstream, events} already have independently specified paths. Metadata differences by phase This isn't an exhaustive list of differences. Rather, this is what we parse in our own code. Phase 3A vs later: Filename 3A probe filename has no index number after .imec. , e.g. myrun_g0_t0.imec.ap.meta . All later phases have a probe index, e.g. myrun_g0_t0.imec0.ap.meta . Metadata 3A contains key typeEnabled with string values from list {imec, nidq} . All later phases instead contain keys {typeIMEnabled, typeNIEnabled} with integer counts of those streams. Phase 3B1 vs later: Metadata 3B1 does not have keys {imDatPrb_port, imDatPrb_slot, syncImInputSlot} . Phase 2.0: Metadata 2.0 introduces keys {imDatPrb_dock, imMaxInt} Probe type 3A contains key imProbeOpt , an integer prototype probe option code {1,2,3,4} . All later phases instead contain key imDatPrb_type , an integer encoding a production probe's unique feature set. fin","title":"Parsing Data Files"},{"location":"help/parsing/#parsing-data-files","text":"","title":"Parsing Data Files"},{"location":"help/parsing/#directory-and-file-names","text":"","title":"Directory and file names"},{"location":"help/parsing/#imec-probe-filenames","text":"3A probe filename has no index number after .imec. , e.g. myrun_g0_t0.imec.ap.meta . All later phases have a probe index, e.g. myrun_g0_t0.imec0.ap.meta . CatGT Tip : Use option -prb_3A for 3A data, and DON'T use -prb=list !","title":"Imec probe filenames"},{"location":"help/parsing/#run-folder","text":"Prior to SpikeGLX version 20190214 there were no run folders. Rather, all datafiles output from a run were placed directly into the current Data Directory . Version 20190214 and later first create a Run Folder within the data directory. The run folder holds all output from that run, and is named with a g-index, e.g. myrun_g0 . CatGT Tip : Use option -no_run_fld for runs before version 20190214.","title":"Run folder"},{"location":"help/parsing/#probe-folders","text":"Xilinx-based 3A, 3B1 These phases are single-probe. No option for probe folders is provided. PXI-based 3B2, 2.0 Version 20190214 and later provide a Folder per probe option on the Save tab: If not selected, no probe folders are created. Rather, all output files for a run are saved into its Run Folder . If selected (checked): All nidq datafiles are saved directly into the Run Folder . A separate Probe Folder for each imec probe is first created in the run folder. The probe folder holds all output from that probe, and is named with both g- and probe-indices, e.g. myrun_g0_imec6 . CatGT Tip : Use option -prb_fld if option selected.","title":"Probe folders"},{"location":"help/parsing/#multidrive-output","text":"","title":"Multidrive output"},{"location":"help/parsing/#pxi-based-3b2-20","text":"Before the multidrive option was introduced SpikeGLX let you specify at most one data directory to hold all your run output folders and files. As of version 20200309 , there is still a main data directory, but now you can check a box to enable the splitting of runs across additional drives/directories to access greater storage capacity when doing very long runs or when using many probes. Modulo rule The rule for distributing run output into several data directories is this: As always, the (N) probes have logical indices [0..N-1] . The main data directory is dir-0 . The set of all (M) directories, including the main one are enumerated [dir-0..dir-M-1] . NI output is always sent to dir-0. Probe-j output is sent to dir-(j modulo M) . Within each dir-k SpikeGLX will create a run folder and applicable probe folders according to the same rules that apply for a single main data directory. A Modulo B means \"take the remainder of dividing integers A/B \". Modulo is often written mod and is written % in C/C++ and Python code. For example, suppose these parameters: dir-0 = D:\\Data dir-1 = E:\\DataB dir-2 = G:\\DataC runname = myRun folder per run is enabled Example output would go here: NI: D:\\Data\\myrun\\myrun_g0_t0.ni.bin(.meta) Imec0: D:\\Data\\myrun\\myrun_g0_imec0\\myrun_g0_t0.imec0.ap.bin(.meta) Imec3: D:\\Data\\myrun\\myrun_g0_imec3\\myrun_g0_t0.imec3.ap.bin(.meta) Imec4: E:\\DataB\\myrun\\myrun_g0_imec4\\myrun_g0_t0.imec4.ap.bin(.meta) Imec8: G:\\DataC\\myrun\\myrun_g0_imec8\\myrun_g0_t0.imec8.ap.bin(.meta)","title":"PXI-based 3B2, 2.0"},{"location":"help/parsing/#new-offline-behaviors","text":"When multidrive output is enabled, a run's files are distributed over several directories. The SpikeGLX features and tools that work on sets of run files are affected as follows: FileViewer/Link : To link files in the same run, that is, to show them and scroll them together, you first open any binary file from a run, then choose File/Link in the Viewer window. In the Link dialog you list which other streams in this run to open and link together. This feature only knows how to search for and link other streams that reside in the same parent data-dir/run-folder as the open file. If the multidrive option had split the run, you will only be able to link the streams that live together in one of the split run folders. You'll have to separately view and link data that live in separate data directories. Tools/Sample Rates From Run : This dialog still looks the same. You select any binary file from a run and you have an option to calibrate just that data stream, or all of the streams it can find in the same run folder. If the multidrive option had split the run, this tool will only be able to locate and calibrate probes it can find in the same split run folder as the selected binary. That is, you'll have to repeat this process once for each separate data directory. CatGT : Tell CatGT which probes to process by pointing to a data directory -dir=myDir and listing the probes you want to process, say -prb=0:3 . In CatGT version 1.2.7 and earlier, if any probe is missing from that directory, the run stops and logs a missing file error. As of CatGT version 1.2.8 you can add option -prb_miss_ok telling CatGT to skip missing probes and continue with the next one it finds in that directory. Note that you will have to make a separate command line for each data directory, but each command line can conveniently list all of the probes in the run. You don't have to figure out the modulo rule for each directory. TPrime : Unaffected. All of the input and outfile files {tostream, fromstream, events} already have independently specified paths.","title":"New offline behaviors"},{"location":"help/parsing/#metadata-differences-by-phase","text":"This isn't an exhaustive list of differences. Rather, this is what we parse in our own code.","title":"Metadata differences by phase"},{"location":"help/parsing/#phase-3a-vs-later","text":"Filename 3A probe filename has no index number after .imec. , e.g. myrun_g0_t0.imec.ap.meta . All later phases have a probe index, e.g. myrun_g0_t0.imec0.ap.meta . Metadata 3A contains key typeEnabled with string values from list {imec, nidq} . All later phases instead contain keys {typeIMEnabled, typeNIEnabled} with integer counts of those streams.","title":"Phase 3A vs later:"},{"location":"help/parsing/#phase-3b1-vs-later","text":"Metadata 3B1 does not have keys {imDatPrb_port, imDatPrb_slot, syncImInputSlot} .","title":"Phase 3B1 vs later:"},{"location":"help/parsing/#phase-20","text":"Metadata 2.0 introduces keys {imDatPrb_dock, imMaxInt}","title":"Phase 2.0:"},{"location":"help/parsing/#probe-type","text":"3A contains key imProbeOpt , an integer prototype probe option code {1,2,3,4} . All later phases instead contain key imDatPrb_type , an integer encoding a production probe's unique feature set. fin","title":"Probe type"},{"location":"help/NIDriverInstall/NI_driver_installation/","text":"NI chassis and I/O card setup This document covers the steps to install the necessary software for an NI chassis, NI remote control module, and an NI acquisition device for non-neural signals. We've selected a PXI-6133 module in these examples. SpikeGLX will work with multifunction IO S-series 61XX, M-series 62XX, X-series 63XX devices, and with digital-only 653X devices. Moreover, you can use PXI, PCI or USB devices, though USB is slower and should be avoided for new purchases. Install Hardware Start by installing the remote control module (e.g. NI PXIe-8381, NI PXIe-8301) in the control slot (slot 1, red) in the PXI chassis. If you're using a PXIe-PCIe link, install the corresponding PCIe card in your computer. The PXI-6133 module and PXIe imec modules can be installed now or added after all the NI software has been installed. Boot Up Power-on sequence varies for different chassis models and links. NI 1082 with any link: Leave the chassis off; it will be automatically turned on when the computer boots. NI 1071 with PXIe-PCIe link: Power chassis on first, then start computer. NI 1071 with Thunderbolt link: Power on sequence should not matter; we recommend powering the chassis on first. Note that although Thunderbolt is hot-pluggable in many applications, breaking the connection between the computer and chassis is NOT recommended for a Neuropixels system. The system should be power cycled if the link is disconnected accidentally. When Windows boots, the new hardware will be recognized by the system. For the Thunderbolt link, a dialog comes up asking if you want to always link to this device; select \"Always connect\". In the device manager, the chassis shows up in Other devices as an \"SM Bus Controller.\" A Neuropixels module, if the driver software has not been installed, appears as a \"PCIe Memory controller.\" Install Platform Services Depending on the computer, the chassis may or may not be recognized as an NI device. If it is, a dialog will appear with a link to the download page for the NI PXI Platform Services driver package. The download page is here: PXI Platform Services . Select the latest, non-runtime version. When you click the download link, you'll be asked to log in or create an NI account; creating an NI account only requires an email address. Following the NI instructions, extract the downloaded zip and run the installer. Use the default settings for what to install. For version 18.5, that list is: The only option during the installation is whether to allow automatic updating of NI software; we recommend against automatic updating of any kind on a high throughput data acquisition computer. After the installation, run NI-MAX (Measurement & Automation Explorer). The left hand pane shows a tree of all the installed devices detected by the software. The PXI-6133 appears underneath the heading for the chassis (a PCI-6133 installed in the computer shows up as an independent device). Here's the NI-MAX display for a system with the PXI-6133 installed in an NI 1082 PXI chassis. Note that the chassis is recognized at this stage. The PXI-6133 is also recognized, but doesn't have a driver yet. Install DAQmx SpikeGLX communicates with the PXI-6133 or PCI-6133 using an NI package called NI-DAQmx. Use the link in the dialog, or go to NI driver downloads . Follow the link to the NI-DAQmx drivers. Select the latest version, and pick the option for Runtime with Configuration Support . Configuration Support means NI-MAX gets useful tabs showing device pinouts, signal routing tables, and tools for creating your own simple test applications. The figure shows v18.6 but SpikeGLX has been tested with all versions up to v21.0. The latest version should be fine. Follow the NI instructions for downloading and running the installer. The only options will be where to install (default is fine) and whether to allow updates; again, we recommend against automated updating. After the NI-DAQmx installation, run NI-MAX again. Now the PXI-6133 is recognized and is ready to run: Hook up your signals NI sells two varieties of breakout boxes. For the PXI-6133, which has 8 analog and 8 digital inputs, the BNC-2110 is very convenient. To connect more than 8 analog inputs (e.g. 16 single ended inputs on a PXIe-6341), choose an SCB-68, which gives direct access to all the pins of the I/O connector. fin","title":"Installing NI Drivers"},{"location":"help/NIDriverInstall/NI_driver_installation/#ni-chassis-and-io-card-setup","text":"This document covers the steps to install the necessary software for an NI chassis, NI remote control module, and an NI acquisition device for non-neural signals. We've selected a PXI-6133 module in these examples. SpikeGLX will work with multifunction IO S-series 61XX, M-series 62XX, X-series 63XX devices, and with digital-only 653X devices. Moreover, you can use PXI, PCI or USB devices, though USB is slower and should be avoided for new purchases.","title":"NI chassis and I/O card setup"},{"location":"help/NIDriverInstall/NI_driver_installation/#install-hardware","text":"Start by installing the remote control module (e.g. NI PXIe-8381, NI PXIe-8301) in the control slot (slot 1, red) in the PXI chassis. If you're using a PXIe-PCIe link, install the corresponding PCIe card in your computer. The PXI-6133 module and PXIe imec modules can be installed now or added after all the NI software has been installed.","title":"Install Hardware"},{"location":"help/NIDriverInstall/NI_driver_installation/#boot-up","text":"Power-on sequence varies for different chassis models and links. NI 1082 with any link: Leave the chassis off; it will be automatically turned on when the computer boots. NI 1071 with PXIe-PCIe link: Power chassis on first, then start computer. NI 1071 with Thunderbolt link: Power on sequence should not matter; we recommend powering the chassis on first. Note that although Thunderbolt is hot-pluggable in many applications, breaking the connection between the computer and chassis is NOT recommended for a Neuropixels system. The system should be power cycled if the link is disconnected accidentally. When Windows boots, the new hardware will be recognized by the system. For the Thunderbolt link, a dialog comes up asking if you want to always link to this device; select \"Always connect\". In the device manager, the chassis shows up in Other devices as an \"SM Bus Controller.\" A Neuropixels module, if the driver software has not been installed, appears as a \"PCIe Memory controller.\"","title":"Boot Up"},{"location":"help/NIDriverInstall/NI_driver_installation/#install-platform-services","text":"Depending on the computer, the chassis may or may not be recognized as an NI device. If it is, a dialog will appear with a link to the download page for the NI PXI Platform Services driver package. The download page is here: PXI Platform Services . Select the latest, non-runtime version. When you click the download link, you'll be asked to log in or create an NI account; creating an NI account only requires an email address. Following the NI instructions, extract the downloaded zip and run the installer. Use the default settings for what to install. For version 18.5, that list is: The only option during the installation is whether to allow automatic updating of NI software; we recommend against automatic updating of any kind on a high throughput data acquisition computer. After the installation, run NI-MAX (Measurement & Automation Explorer). The left hand pane shows a tree of all the installed devices detected by the software. The PXI-6133 appears underneath the heading for the chassis (a PCI-6133 installed in the computer shows up as an independent device). Here's the NI-MAX display for a system with the PXI-6133 installed in an NI 1082 PXI chassis. Note that the chassis is recognized at this stage. The PXI-6133 is also recognized, but doesn't have a driver yet.","title":"Install Platform Services"},{"location":"help/NIDriverInstall/NI_driver_installation/#install-daqmx","text":"SpikeGLX communicates with the PXI-6133 or PCI-6133 using an NI package called NI-DAQmx. Use the link in the dialog, or go to NI driver downloads . Follow the link to the NI-DAQmx drivers. Select the latest version, and pick the option for Runtime with Configuration Support . Configuration Support means NI-MAX gets useful tabs showing device pinouts, signal routing tables, and tools for creating your own simple test applications. The figure shows v18.6 but SpikeGLX has been tested with all versions up to v21.0. The latest version should be fine. Follow the NI instructions for downloading and running the installer. The only options will be where to install (default is fine) and whether to allow updates; again, we recommend against automated updating. After the NI-DAQmx installation, run NI-MAX again. Now the PXI-6133 is recognized and is ready to run:","title":"Install DAQmx"},{"location":"help/NIDriverInstall/NI_driver_installation/#hook-up-your-signals","text":"NI sells two varieties of breakout boxes. For the PXI-6133, which has 8 analog and 8 digital inputs, the BNC-2110 is very convenient. To connect more than 8 analog inputs (e.g. 16 single ended inputs on a PXIe-6341), choose an SCB-68, which gives direct access to all the pins of the I/O connector. fin","title":"Hook up your signals"},{"location":"help/catgt_tshift/catgt_tshift/","text":"CatGT: Tshift, CAR, Gfix Tshift Imec probes digitize the voltages on all of their channels during each sample period (~ 1/(30kHz)). However, the converting circuits (ADCs) are expensive in power and real estate, so there are only a few dozen on the probe and they are shared by the ~384 channels. The channels are organized into multiplex channel groups that are digitized together, consequently each group's actual sampling time is slightly offset from that of other groups. CatGT automatically applies an operation we call tshift to undo the effects of multiplexing by temporally aligning channels to each other. This improves the results of operations that compare or combine different channels, such as global CAR filtering or whitening. The FFT-based correction method was proposed by Olivier Winter of the International Brain Laboratory. Figure: Licking artifact (fast transient on all channels), 1200 uV full-scale: Figure panels (from SpikeGLX FileViewer): Left: Raw traces; 100 ms time span. Middle: Raw traces zoomed-in; 1 ms time span. Right: Aligned by CatGT tshift; 1 ms time span. Artifact Corrections {CAR, Gfix} CAR (CatGT -gblcar option) Global common average referencing (CAR) calculates (for each sample) the average over all channels, and then subtracts that from each channel. This does a great job of cancelling artifacts that are indeed similar on all channels and that haven't saturated on any channels. Zeroing (CatGT -gfix option) Sometimes the hardware experiences a large electrical insult that affects all channels in a nonuniform way. This may arise from licking, chewing, head banging or laser stimulation events. In these cases CAR won't work as well. CatGT can detect these events and replace them with zeros. This option is specified, for example, as follows: -gfix=0.40,0.10,0.02 . This requires that a transient artifact must attain a peak amplitude of at least ||0.40 mV||, must reach its peak as least as rapidly as ||0.1mV/sample-tick||, and the transient is over when the amplitude settles back to ||0.02 mV|| or smaller. These values are easy to read by inspecting examples with the SpikeGLX FileViewer. Furthermore, at least 25% of the channels must show a transient with these characteristics. Such timepoints are flagged. After all other filtering has been applied, the data are edited to replace the artifact span with zeros in all channels. It does make sense to use -gblcar and -gfix options together. Editing removes extreme artifacts completely, while CAR removes common background noise at all timepoints, not just at extrema. Figure: Variety of artifacts spanning all channels, 240 uV and 100 ms full-scale: Figure panels (from SpikeGLX FileViewer): Left: Uncorrected. Middle: -gblcar; Smaller artifacts removed. Right: -gblcar -gfix; All artifacts removed. What is global demux (gbldmx)? The CatGT gbldmx option separates the channels into groups that are sampled concurrently so suffer no time shifts within the group. CAR is then performed on a group by group basis which has advantages and disadvantages compared to doing (tshift + gblcar). Disadvantages: Because the number of channels in a multiplex group is small the averages are noisier than we can achieve by tshifting all channels into one large group and applying CAR after that. Outlier channels have a stronger biasing effect with smaller sample sizes. The correction factors tend to be larger (small channel count in denominator) than with CAR, and that can produce overcorrection artifacts that look like spikes (often small inverted spikes). When to use gbldmx: The probe sampling rate is 30 kHz, so noise faster than 15 kHz is not adequately sampled, and therefore, not accurately propagated to other channel groups by the tshift operation. So for very fast noise artifacts, gbldmx may produce better cancellation within each subsampling group. gbldmx usually outperforms gblcar when tshift is omitted. You may want to omit tshift in CatGT, using the -no_tshift option, if tshift will be applied by some later component in your analysis pipeline. What is local CAR (loccar)? CatGT offers the option to do local CAR over a ring of channels. The idea is that for each channel a disk is used to average the signal of neighbor channels, but an inner disk (containing a potential spike footprint) is excluded from the average. You get to specify the inner and outer disk radii in units of channels. The downsides to this are: Its hard to tune the disk sizes to the actual spike footprints, especially if the probe spans several brain regions with different characteristic neuron sizes, and considering that neurons are at a variety of distances from the probe. Although loccar appears to have good noise reduction, more often than not the true spike amplitude is more severely attenuated because the footprint is larger than you expect. When to use loccar: If background is not uniform over the whole probe. If the probe spans dissimilar brain regions, you may do better averaging more locally. Try setting a fairly large outer radius to balance locality vs smoothness. What about LFP? Tshift is valuable for aligning LFP channels. CAR is not recommended when analyzing low frequencies: LFP varies slowly over the whole shank, making distant channels a bad reference for correcting noise. fin","title":"CatGT: Tshift, CAR, Gfix"},{"location":"help/catgt_tshift/catgt_tshift/#catgt-tshift-car-gfix","text":"","title":"CatGT: Tshift, CAR, Gfix"},{"location":"help/catgt_tshift/catgt_tshift/#tshift","text":"Imec probes digitize the voltages on all of their channels during each sample period (~ 1/(30kHz)). However, the converting circuits (ADCs) are expensive in power and real estate, so there are only a few dozen on the probe and they are shared by the ~384 channels. The channels are organized into multiplex channel groups that are digitized together, consequently each group's actual sampling time is slightly offset from that of other groups. CatGT automatically applies an operation we call tshift to undo the effects of multiplexing by temporally aligning channels to each other. This improves the results of operations that compare or combine different channels, such as global CAR filtering or whitening. The FFT-based correction method was proposed by Olivier Winter of the International Brain Laboratory. Figure: Licking artifact (fast transient on all channels), 1200 uV full-scale: Figure panels (from SpikeGLX FileViewer): Left: Raw traces; 100 ms time span. Middle: Raw traces zoomed-in; 1 ms time span. Right: Aligned by CatGT tshift; 1 ms time span.","title":"Tshift"},{"location":"help/catgt_tshift/catgt_tshift/#artifact-corrections-car-gfix","text":"CAR (CatGT -gblcar option) Global common average referencing (CAR) calculates (for each sample) the average over all channels, and then subtracts that from each channel. This does a great job of cancelling artifacts that are indeed similar on all channels and that haven't saturated on any channels. Zeroing (CatGT -gfix option) Sometimes the hardware experiences a large electrical insult that affects all channels in a nonuniform way. This may arise from licking, chewing, head banging or laser stimulation events. In these cases CAR won't work as well. CatGT can detect these events and replace them with zeros. This option is specified, for example, as follows: -gfix=0.40,0.10,0.02 . This requires that a transient artifact must attain a peak amplitude of at least ||0.40 mV||, must reach its peak as least as rapidly as ||0.1mV/sample-tick||, and the transient is over when the amplitude settles back to ||0.02 mV|| or smaller. These values are easy to read by inspecting examples with the SpikeGLX FileViewer. Furthermore, at least 25% of the channels must show a transient with these characteristics. Such timepoints are flagged. After all other filtering has been applied, the data are edited to replace the artifact span with zeros in all channels. It does make sense to use -gblcar and -gfix options together. Editing removes extreme artifacts completely, while CAR removes common background noise at all timepoints, not just at extrema. Figure: Variety of artifacts spanning all channels, 240 uV and 100 ms full-scale: Figure panels (from SpikeGLX FileViewer): Left: Uncorrected. Middle: -gblcar; Smaller artifacts removed. Right: -gblcar -gfix; All artifacts removed.","title":"Artifact Corrections {CAR, Gfix}"},{"location":"help/catgt_tshift/catgt_tshift/#what-is-global-demux-gbldmx","text":"The CatGT gbldmx option separates the channels into groups that are sampled concurrently so suffer no time shifts within the group. CAR is then performed on a group by group basis which has advantages and disadvantages compared to doing (tshift + gblcar). Disadvantages: Because the number of channels in a multiplex group is small the averages are noisier than we can achieve by tshifting all channels into one large group and applying CAR after that. Outlier channels have a stronger biasing effect with smaller sample sizes. The correction factors tend to be larger (small channel count in denominator) than with CAR, and that can produce overcorrection artifacts that look like spikes (often small inverted spikes). When to use gbldmx: The probe sampling rate is 30 kHz, so noise faster than 15 kHz is not adequately sampled, and therefore, not accurately propagated to other channel groups by the tshift operation. So for very fast noise artifacts, gbldmx may produce better cancellation within each subsampling group. gbldmx usually outperforms gblcar when tshift is omitted. You may want to omit tshift in CatGT, using the -no_tshift option, if tshift will be applied by some later component in your analysis pipeline.","title":"What is global demux (gbldmx)?"},{"location":"help/catgt_tshift/catgt_tshift/#what-is-local-car-loccar","text":"CatGT offers the option to do local CAR over a ring of channels. The idea is that for each channel a disk is used to average the signal of neighbor channels, but an inner disk (containing a potential spike footprint) is excluded from the average. You get to specify the inner and outer disk radii in units of channels. The downsides to this are: Its hard to tune the disk sizes to the actual spike footprints, especially if the probe spans several brain regions with different characteristic neuron sizes, and considering that neurons are at a variety of distances from the probe. Although loccar appears to have good noise reduction, more often than not the true spike amplitude is more severely attenuated because the footprint is larger than you expect. When to use loccar: If background is not uniform over the whole probe. If the probe spans dissimilar brain regions, you may do better averaging more locally. Try setting a fairly large outer radius to balance locality vs smoothness.","title":"What is local CAR (loccar)?"},{"location":"help/catgt_tshift/catgt_tshift/#what-about-lfp","text":"Tshift is valuable for aligning LFP channels. CAR is not recommended when analyzing low frequencies: LFP varies slowly over the whole shank, making distant channels a bad reference for correcting noise. fin","title":"What about LFP?"},{"location":"help/solder/solder/","text":"Noise: Learn How To Solder Overview Imec probes as shipped to you generally meet their noise specs: 6 uV RMS . Noise above that is in your own setup/environment. There are many possible sources of noise in the world, but all too often we have traced excessive noise to bad soldering of the reference or ground connections at (or near) the probe. Such effects can show up with a wide range of amplitudes and frequencies, but tend to be common to most channels. The probes are super sensitive differential voltage meters. A bad solder joint on the reference path will have high (possibly variable) resistance. This causes measurements to float and wander. Similarly, a poor connection of the amplifier ground causes unpredictable circuit performance. It is essential to make good wiring connections at the probe and at other points such as a skull screw. What to look for Following image unmodified and courtesy of Bill Earl, adafruit.com. Look at your connections! Do they honestly look alright? How to solder Read all the truly excellent instructions at adafruit.com: Guide To Excellent Soldering . We've added some emphasis and a few extra tips below. Tips Practice first : If you're at all nervous about doing this right, and who isn't?, then by all means practice soldering some wires or inexpensive resistors onto an old printed circuit board. Next extend your soldering practice to flex cable which doesn't heat as easily as standard printed circuit board. Use a dummy probe if you have one to spare. Get the hang of it first. Maybe somebody else in your lab is just better at it than you are. Make them do it. Buy them a beer after. Use the right wire : Use wire with adequate conductivity like copper or silver. Stainless steel, for example, does not conduct heat very well making it hard to wet with solder. Solder won't stick to it. Validate your choice using a scrap of that wire to see if heats and melts solder. Use the right solder : Lead is nasty, but quite honestly, you want to use solder with about a 60/40 ratio of tin/lead because it melts and flows at a low enough temperature to prevent damaging the probe. Use the right iron : Use an iron with settable temperature so you can get the joint hot enough but overheat it. Set it to about 700 F. Make sure the parts are clean : The pad, wire and tip of the iron should be free of oils, plastics or other contaminants. Tin the tip of the iron : (1) Clean the tip: Coat it with solder and immediately wipe it off again using the moistened sponge that comes with the solder station. The tip should look shiny and bright all over. (2) Melt a tiny fresh bead of solder onto the tip, just enough to get heat flowing when you touch it to the joint. Heat the joint, not the solder : Never drip molten solder onto a joint. Heat the joint up so solder flows onto and adheres to the joint as you touch it to the wires. Try not to touch the iron itself, that's cheating. However, sometimes you need to wet the tip a little better by adding a touch more of solder to the iron so it makes better contact. Get it hot enough : It's hot enough when touching solder to the wire makes it melt and flow easily. Yes the probe is expensive and the iron is hot. You'll be super nervous, but you still have to get the connection hot enough to flow the solder or your expensive probe will not work. Keep still while it cools : After removing the iron, the joint and solder will cool in 2 to 3 seconds. Don't move while it cools. If you disturb the work during those few seconds you'll diminish the contact surface area, hence, the conductivity of the joint. fin","title":"Noise: Learn How To Solder"},{"location":"help/solder/solder/#noise-learn-how-to-solder","text":"","title":"Noise: Learn How To Solder"},{"location":"help/solder/solder/#overview","text":"Imec probes as shipped to you generally meet their noise specs: 6 uV RMS . Noise above that is in your own setup/environment. There are many possible sources of noise in the world, but all too often we have traced excessive noise to bad soldering of the reference or ground connections at (or near) the probe. Such effects can show up with a wide range of amplitudes and frequencies, but tend to be common to most channels. The probes are super sensitive differential voltage meters. A bad solder joint on the reference path will have high (possibly variable) resistance. This causes measurements to float and wander. Similarly, a poor connection of the amplifier ground causes unpredictable circuit performance. It is essential to make good wiring connections at the probe and at other points such as a skull screw.","title":"Overview"},{"location":"help/solder/solder/#what-to-look-for","text":"Following image unmodified and courtesy of Bill Earl, adafruit.com. Look at your connections! Do they honestly look alright?","title":"What to look for"},{"location":"help/solder/solder/#how-to-solder","text":"Read all the truly excellent instructions at adafruit.com: Guide To Excellent Soldering . We've added some emphasis and a few extra tips below.","title":"How to solder"},{"location":"help/solder/solder/#tips","text":"Practice first : If you're at all nervous about doing this right, and who isn't?, then by all means practice soldering some wires or inexpensive resistors onto an old printed circuit board. Next extend your soldering practice to flex cable which doesn't heat as easily as standard printed circuit board. Use a dummy probe if you have one to spare. Get the hang of it first. Maybe somebody else in your lab is just better at it than you are. Make them do it. Buy them a beer after. Use the right wire : Use wire with adequate conductivity like copper or silver. Stainless steel, for example, does not conduct heat very well making it hard to wet with solder. Solder won't stick to it. Validate your choice using a scrap of that wire to see if heats and melts solder. Use the right solder : Lead is nasty, but quite honestly, you want to use solder with about a 60/40 ratio of tin/lead because it melts and flows at a low enough temperature to prevent damaging the probe. Use the right iron : Use an iron with settable temperature so you can get the joint hot enough but overheat it. Set it to about 700 F. Make sure the parts are clean : The pad, wire and tip of the iron should be free of oils, plastics or other contaminants. Tin the tip of the iron : (1) Clean the tip: Coat it with solder and immediately wipe it off again using the moistened sponge that comes with the solder station. The tip should look shiny and bright all over. (2) Melt a tiny fresh bead of solder onto the tip, just enough to get heat flowing when you touch it to the joint. Heat the joint, not the solder : Never drip molten solder onto a joint. Heat the joint up so solder flows onto and adheres to the joint as you touch it to the wires. Try not to touch the iron itself, that's cheating. However, sometimes you need to wet the tip a little better by adding a touch more of solder to the iron so it makes better contact. Get it hot enough : It's hot enough when touching solder to the wire makes it melt and flow easily. Yes the probe is expensive and the iron is hot. You'll be super nervous, but you still have to get the connection hot enough to flow the solder or your expensive probe will not work. Keep still while it cools : After removing the iron, the joint and solder will cool in 2 to 3 seconds. Don't move while it cools. If you disturb the work during those few seconds you'll diminish the contact surface area, hence, the conductivity of the joint. fin","title":"Tips"},{"location":"help/syncEdges/Sync_edges/","text":"Sync: Aligning with Edges Document organization: General principles Needed components and their use Worked example showing command line parameters Plug for scripted pipeline Overview Definition : SpikeGLX Data Stream = Set of channels sampled according to a given sample clock. Examples of streams: Neuropixels probe . The sample clock lives in the headstage . The AP-band data are acquired at nominally 30kHz but actual rates may differ by as much as one Hz. If that probe acquires a separate LF-band, the same clock is used and the LF-band sample rate is exactly 1/12 that of the AP-band. In short each probe, really each headstage, is a separate stream. Onebox ADC channels : An imec Onebox can record from several probes, each of which is a stream, and it can record several analog and digital non-neural channels at ~30kHz, which we also regard as a stream. This gets its own obx file type. NI device : You can use a NI multifunction/multichannel device to record your non-neural analog and digital (TTL) channels. You'll have several options for setting its sample rate. This is one stream. Actually SpikeGLX lets you run two NI devices of the same model together, one master and one slave, so that they share a common clock, and are thus recorded and treated as a single stream with double the channel capacity. Problem : Generally, data streams each have their own clock, hence, their own nominal sample rate, and run asynchronously. Moreover, sample clock rates will vary with temperature. This makes it necessary and challenging to synchronize (align) events acquired in different streams. Solution : SpikeGLX (plus companion tools CatGT and TPrime ) provide a reliable means of aligning data to sub-millisecond accuracy. Note that the SpikeGLX \"alignment\" process does not entail any resampling or editing of the raw acquired data. Rather it is a scheme for mapping post-analysis event times (seconds, not samples) from one coordinate system to another. This mapping scheme is implemented as follows. A common 1 Hz square wave is recorded in one channel of each data stream throughout the experiment. In offline processing, the rising edges in this \" sync wave \" are paired across streams A & B. Any event (T) occurring in B is no more than one second away from a nearest (preceding) sync wave edge (Eb) in stream B. That edge has a simultaneously occurring matching edge (Ea) in stream A. To map T in stream B to T' in stream A, we simply calculate: T' = T - Eb + Ea. Assuming we can correctly pair sync wave edges, the error on any mapped time is bounded by [1s * rate_error/rate]. For example, if the nominal probe sample rate is 30kHz and the error in that value is 3Hz, then the error in the mapped time would be 0.1ms. Rate error arises when we do not know the actual clock rate. The two largest sources of error are (1) bad/unknown calibration (the largest difference from 30kHz we've seen post calibration is 1Hz), and (2) temperature variation, which we measure to be very small near room temperature: < 0.01Hz/5C. So mapping errors after application of TPrime are typically smaller than 0.1ms. Briefly, the sync-related roles of various components are the following, listed in the order you would organize your workflow: SpikeGLX : Calibrate sample rates Recalibrate rates from run Generate and record runtime sync wave CatGT : Extract tables of sync wave edges Extract tables of non-neural event times Your_favorite_spike_sorter : Extract tables of spike times TPrime : Remap all tables of times to reference stream coordinates The remaining sections cover some how-to tips. SpikeGLX: Clock calibration Do I need it? Calibrating your clocks is useful for these reasons: It's a test of headstage health. The measured rate shouldn't be more than 1Hz different than 30kHz, and if you repeat the measurement, it should remain stable to < 0.1Hz. TPrime should also be used if you plan to publish claims about timing. But if you are just browsing in the FileViewer or eyeballing PSTH plots to roughly see how things line up without the bother of running TPrime, that will work better if all clocks are at least calibrated. TPrime needs to be able to identify pairs of matching edges. If the recorded times of edges in the sync wave are a second or more off, the adjustment may suffer phase error. This could be a problem in a long run where error is cumulative. To estimate the duration, consider that an uncalibrated clock could run as much as 1Hz differently than 30kHz. Then a problem will occur at time T, where 1Hz * T = 30000 or T = 8.3 hours. How to Using the Sync tab in the Configuration dialog, you: select a sync wave source specify for each stream which channels are getting sync wave input check Use next run for calibration (and select a run-length) This configures a special purpose run and does a post-run analysis to count how many samples are actually occurring between edges of the sync wave, and thereby deduces the true sample rate. It reports its results in a dialog for you to accept or reject. If accepted these become saved in a database and are used for subsequent runs of those hardware devices until you decide to do another calibration. Tips You probably don't need to calibrate a given device more than once, but you might as well get a good measurement for that one time. We recommend setting the calibration data collection time to 40 min . SpikeGLX: Recalibration Conditions Even if you never calibrated your sample clocks before, you can still calibrate them after the fact from existing run data if: You were recording the sync wave in each stream you want to calibrate. The run is long enough to get a reasonable estimate, at least 20 min. How to To do this, choose item Sample Rates From Run from the Tools menu and follow the instructions in the dialog. As with a first-time calibration it will show you results that you can accept or not. If you accept you can further choose whether to edit this run's metadata, and whether to update the database and use the new rates going forward. The dialog won't let you select imec LF-band files because their time resolution is too low. Rather, select the partner AP-band file. Both AP and LF metadata will be updated together. Note that the LF rate is exactly 1/12 the AP rate. SpikeGLX: Run with sync How to It's easy to do a run that records the sync waveform. Specify a source/generator of the common sync waveform. You have several options: Select any one of the imec slots. Select your NI multifunction I/O device (SpikeGLX programs its output). Use your own signal generator. Set it for 1 Hz and 50% duty cycle. Feed wires from the source to one channel in each stream. For the PXI based versions, all of the imec modules share the sync signal using the chassis backplane, so only one slot (module) needs a wire connected to its SMA connector, whether it is specified as input or output (source). So you connect a wire to just one (active) module, and all imec probes will automatically record the sync wave. If NI is the source, the Notes field indicates which output terminal to connect. Tell the Sync tab which channels you wired so SpikeGLX can locate the waveform in each stream. For NP 1.0 and later, this signal is hard wired to appear on bit #6 of the last 16-bit word in the stream, the SY channel. File T-zero and length When you are running with sync enabled on the Sync tab, whenever a file-writing trigger event occurs and a new set of files is started, SpikeGLX internally uses the edges to make sure that the files all start at a common wall time. Each file's metadata records the sample index number of the first sample in that file: firstSample . These samples are aligned to each other. Said another way, the files share a common T0. While long files are being written, their alignment may slowly degrade because they are running and recording according to their own clock rates. If the clocks have been calibrated this drift will be a bit smaller, but nothing happens during writing to \"reset\" the alignment. Doing that would entail interpolating or resampling of data, which we do not do. (Note that TPrime corrects times by referencing times to sync edges no matter how long the file is. It's effectively like getting periodic resets throughout the run.) The writing phase for a given set of files (given g, t index) ends when a stop event occurs. Perhaps a writing timer elapses, or a TTL trigger gets a stop signal, or you click the Disable or Stop button. Any such event stops all the streams and closes the files, but the \"right-hand-side\" or \"trailing edges\" of the files are not guaranteed to be perfectly aligned. The files are often quite close to being the same length (metadata item fileTimeSecs ), but this is not controlled. CatGT: Event extraction CatGT can perform several post-processing jobs, singly or in combination: Concatenate a g/t-series of separate trial files (whence the name). Apply tshift, band-pass and CAR filters to neural channels. Edit out saturation artifacts. Extract tables of sync waveform edge times to drive TPrime. Extract tables of any other TTL event times to be aligned with spikes. The extraction features are discussed here. General Starting with version 3.0, CatGT extracts sync edges from all streams by default, unless you specify the -no_auto_sync option (see below). There are five extractors for scanning and decoding nonneural data channels in any data stream. They differ in the data types they operate upon: xa: Finds positive pulses in any analog channel. xd: Finds positive pulses in any digital channel. xia: Finds inverted pulses in any analog channel. xid: Finds inverted pulses in any digital channel. bf: Decodes positive bitfields in any digital channel. The first three parameters of any extractor specify the stream-type, stream-index and channel (16-bit word) to operate on, E.g.: -xa= js,ip,word , <additional parameters> Extractors js (stream-type): NI : js = 0 (any extractor). OB : js = 1 (any extractor). AP : js = 2 (only {xd, xid} are legal). Extractors do not work on LF files. Extractors ip (stream-index) NI : ip = 0 (there is only one NI stream). OB : ip = 0 selects obx0, ip = 7 selects obx7, etc. AP : ip = 0 selects imec0, ip = 7 selects imec7, etc. Extractors word Word is a zero-based channel index. It selects the 16-bit data word to process. word = -1, selects the last word in that stream. That's especially useful to specify the SY word at the end of a Onebox or probe stream. It may be helpful to review the organization of words and bits in data streams in the SpikeGLX User Manual . Extractors positive pulse starts at low non-negative baseline (below threshold) has a leading/rising edge (crosses above threshold) (optionally) stays high/deflected for a given duration has a trailing/falling edge (crosses below threshold) The positive pulse extractors {xa, xd} make text files that report the times (seconds) of the leading edges of matched pulses. Extractors xa Following -xa=js,ip,word , these parameters are required: Primary threshold-1 (V). Optional more stringent threshold-2 (V). Milliseconds duration. If your signal looks like clean square pulses, set threshold-2 to be closer to baseline than threshold-1 to ignore the threshold-2 level and run more efficiently. For noisy signals or for non-square pulses set threshold-2 to be farther from baseline than theshold-1 to ensure pulses attain a desired deflection amplitude. Using two separate threshold levels allows detecting the earliest time that pulse departs from baseline (threshold-1) and separately testing that the deflection is great enough to be considered a real event and not noise (threshold-2). Extractors xd Following -xd=js,ip,word , these parameters are required: Index of the bit in the word. Milliseconds duration. Extractors both xa and xd All indexing is zero-based. Milliseconds duration means the signal must remain deflected from baseline for that long. Milliseconds duration can be zero to specify detection of all leading edges regardless of pulse duration. Milliseconds duration default precision (tolerance) is +/- 20% . Default tolerance can be overridden by appending it in milliseconds as the last parameter for that extractor. Each extractor can have its own tolerance. E.g. -xd=js,ip,word,bit,100 seeks pulses with duration in default range [80,120] ms. E.g. -xd=js,ip,word,bit,100,2 seeks pulses with duration in specified range [98,102] ms. A given channel or even bit could encode two or more types of pulse that have different durations, E.g. -xd=0,0,8,0,10 -xd=0,0,8,0,20 scans and reports both 10 and 20 ms pulses on the same line. Each option, say -xd=2,0,384,6,500 , creates an output file whose name reflects the parameters, e.g., run_name_g0_tcat.imec0.ap.xd_384_6_500.txt . The threshold is not encoded in the -xa filename; just word and milliseconds. The run_name_g0_fyi.txt file lists the full paths of all generated extraction files. The files report the times (s) of leading edges of detected pulses; one time per line, \\n line endings. The time is relative to the start of the stream in which the pulse is detected (native time). Extractors inverted pulse starts at high positive baseline (above threshold) has a leading/falling edge (crosses below threshold) (optionally) stays low/deflected for a given duration has a trailing/rising edge (crosses above threshold) Although the shape is \"inverted,\" these pulses are nevertheless entirely non-negative. The inverted pulse extractors {xia, xid} make text files that report the times (seconds) of the leading edges of matched pulses. The inverted pulse versions work exactly the same way as their positive counterparts. Just keep in mind that inverted pulses have a high baseline level and deflect toward lower values. Extractors bf (bit-field) The -xd and -xid options treat each bit of a digital word as an individual line. In contrast, the -bf option interprets a contiguous group of bits as a non-negative n-bit binary number. The -bf extractor reports value transitions: the newest value and the time it changed, in two separate files. Following -xa=js,ip,word , the parameters are: startbit : lowest order bit included in group (range [0..15]), nbits : how many bits belong to group (range [1..<16-startbit>]). inarow : a real value has to persist this many samples in a row (1 or higher). In the following examples we set inarow=3: To interpret all 16 bits of NI word 5 as a number, set -bf=0,0,5,0,16,3. To interpret the high-byte as a number, set -bf=0,0,5,8,8,3. To interpret bits {3,4,5,6} as a four-bit value, set -bf=0,0,5,3,4,3. You can specify multiple -bf options on the same command line. The words and bits can overlap. Each -bf option generates two output files, named according to the parameters (excluding inarow), for example: run_name_g0_tcat.nidq.bfv_5_3_4.txt . run_name_g0_tcat.nidq.bft_5_3_4.txt , The two files have paired entries. The bfv file contains the decoded values, and the bft file contains the time (seconds from file start) that the field switched to that value. Extractors no_auto_sync option Starting with version 3.0, CatGT automatically extracts sync edges from all streams unless you turn that off using -no_auto_sync . For an NI stream, CatGT reads the metadata to see which analog or digital word contains the sync waveform and builds the corresponding extractor for you, either -xa=0,0,word,thresh,0,500 or -xd=0,0,word,bit,500 . For OB and AP streams, CatGT seeks edges in bit #6 of the SY word, as if you had specified -xd=1,ip,-1,6,500 and/or -xd=2,ip,-1,6,500 . TPrime: Remapping General After recording, spike sorting, TTL extraction...Now you need to convert all these times from the native timelines of the data streams in which they were measured to a common reference timeline. That's the only way you can compare them! That's what TPrime does. TPrime uses three types of files: tostream : The reference stream we will map to. It is defined by a file of sync wave edges as extracted by CatGT. There is only one of these. fromstream : A native stream we will map from. There can be several of these. A fromstream is identified by a file of sync wave edges extracted by CatGT, and, an arbitrary positive integer that is a shorthand for that stream, just so you don't have to type the edge-file-path over and over. events file : These are times you want to convert. Typically you will have a different file for every event class, such as all the spikes from probe zero, or all the nose_poke times from the NI stream. On the command line for each such file you will specify the stream index for the matching fromstream, an input file of native times, a new file path for the output times. Events files Key specs for events files: Input and output file type can be .txt or .npy (Kilosort). You can mix types: txt in, npy out, etc. Times are seconds, they are not sample numbers . Times are relative to the start of the file. Times are in ascending order. Worked example Outline Here we'll show actual command lines for CatGT and TPrime. We'll use a very simple contrived experiment for concreteness. Two probes {0,1}. Two non-neural NI signals {go_cue, nose_poke}. SpikeGLX settings We focus here on SpikeGLX settings relevant to the CatGT/TPrime command lines... Imec Setup tab: (probe 0) :: Save chans : 0-49,200-249,768 ; 2 blocks of 50 channels + SY (probe 1) :: Save chans : all NI Setup tab: Primary device :: XA box: 0 ; go_cue as analog just to demonstrate Primary device :: XD box: 2,3 ; 2=nose_poke, 3=sync Common analog :: AI range : -5, 5 Maps :: Channels to save : all Sync tab: Square wave source :: Imec slot 3 Inputs :: Nidq : Digital bit, 3 Triggers tab Trigger mode : Immediate start ; single file, record upon button press Save tab: Run naming :: Data directory :: D:/Data Run naming :: Run name : demo Run naming :: Folder per probe : checked SpikeGLX output D:/data/ ; data folder demo/ ; run folder demo_g0_imec0/ ; probe folder demo_g0_t0.imec0.ap.bin demo_g0_t0.imec0.ap.meta demo_g0_t0.imec0.lf.bin demo_g0_t0.imec0.lf.meta demo_g0_imec1/ ; probe folder demo_g0_t0.imec1.ap.bin demo_g0_t0.imec1.ap.meta demo_g0_t0.imec1.lf.bin demo_g0_t0.imec1.lf.meta demo_g0_t0.nidq.bin ; ni at top of run folder demo_g0_t0.nidq.meta CatGT command line I broke the line into several groups using continuation characters (^) but doing so is aesthetic only. The comments (;) must not appear in real commands. IMPORTANT : In real command lines there should be NO extra spaces inserted into the text of options, NOR following a caret (^) character. > CatGT ^ -dir=D:/data -run=demo -prb_fld ^ ; run naming -g=0 -t=0,0 ^ ; g and t range -ap -prb=0,1 -ni ^ ; which streams -apfilter=butter,12,300,9000 ^ ; filters -xa=0,0,0,1.1,0,25 ^ ; go_cue = 25 ms square pulse -xd=0,0,1,2,0 ^ ; nose_poke duration unknown -dest=D:/CGT_OUT ^ ; let's put output in new place -out_prb_fld ; and use an output folder per probe CatGT output D:/CGT_OUT/ ; master output folder catgt_demo_g0/ ; run output folder demo_g0_imec0/ ; probe folder demo_g0_tcat.imec0.ap.bin ; filtered data for KS2 demo_g0_tcat.imec0.ap.meta demo_g0_tcat.imec0.ap.xd_100_6_500.txt ; sync edges demo_g0_imec1/ ; probe folder demo_g0_tcat.imec1.ap.bin ; filtered data for KS2 demo_g0_tcat.imec1.ap.meta demo_g0_tcat.imec1.ap.xd_384_6_500.txt ; sync edges demo_g0_tcat.nidq.xa_0_25.txt ; go_cue demo_g0_tcat.nidq.xd_1_2_0.txt ; nose_poke demo_g0_tcat.nidq.xd_1_3_500.txt ; sync edges Kilosort 2 output Suppose we tell KS2 to put its output into the same folders as the CatGT output. Of course we run KS2 once for each probe. The output from KS2 is then: D:/CGT_OUT/ ; master output folder catgt_demo_g0/ ; run output folder demo_g0_imec0/ ; probe folder amplitudes.npy channel_map.npy ... spike_times.npy ; this is in samples ... whitening_mat_inv.npy demo_g0_imec1/ ; probe folder amplitudes.npy channel_map.npy ... spike_times.npy ; this is in samples ... whitening_mat_inv.npy Samples to times Most spike sorters report spike times as sample indices so we'll need our own mini program to convert those to times in seconds. The program: Loads array spike_times.npy . Parses value imSampRate from the metadata file. Divides the rate into each array element. Writes the times out in same folder as spike_seconds.npy . Metadata parsers are available here . IMPORTANT: npy files usually store the values as doubles which preserves full numeric precision. Whenever you are saving clock rates or event times as text, be sure to write the values to microsecond-level precision. Keep six digits in the fractional part. TPrime command line Let's map all times to probe-0: > TPrime -syncperiod=1.0 ^ -tostream=D:/CGT_OUT/catgt_demo_g0/demo_g0_imec0/demo_g0_tcat.imec0.ap.xd_100_6_500.txt ^ -fromstream=1,D:/CGT_OUT/catgt_demo_g0/demo_g0_imec1/demo_g0_tcat.imec1.ap.xd_384_6_500.txt ^ -fromstream=2,D:/CGT_OUT/catgt_demo_g0/demo_g0_tcat.nidq.xd_1_3_500.txt ^ -events=1,D:/CGT_OUT/catgt_demo_g0/demo_g0_imec1/spike_seconds.npy,D:/CGT_OUT/catgt_demo_g0/demo_g0_imec1/spike_seconds_adj.npy ^ -events=2,D:/CGT_OUT/catgt_demo_g0/demo_g0_tcat.nidq.xa_0_25.txt,D:/CGT_OUT/catgt_demo_g0/go_cue.txt ^ -events=2,D:/CGT_OUT/catgt_demo_g0/demo_g0_tcat.nidq.xd_1_2_0.txt,D:/CGT_OUT/catgt_demo_g0/nose_poke.txt Scripted pipeline It can be daunting to get all these command lines correct. You might want to check out Jennifer Colonell's version of the Allen Institute ecephys_spike_sorting pipeline. This Python script-driven pipeline chains together: CatGT, KS2, Noise Cluster Tagging, C_Waves, QC metrics, TPrime. It's been tested a lot here at Janelia and several other institutions. fin","title":"Sync: Aligning with Edges"},{"location":"help/syncEdges/Sync_edges/#sync-aligning-with-edges","text":"Document organization: General principles Needed components and their use Worked example showing command line parameters Plug for scripted pipeline","title":"Sync: Aligning with Edges"},{"location":"help/syncEdges/Sync_edges/#overview","text":"Definition : SpikeGLX Data Stream = Set of channels sampled according to a given sample clock. Examples of streams: Neuropixels probe . The sample clock lives in the headstage . The AP-band data are acquired at nominally 30kHz but actual rates may differ by as much as one Hz. If that probe acquires a separate LF-band, the same clock is used and the LF-band sample rate is exactly 1/12 that of the AP-band. In short each probe, really each headstage, is a separate stream. Onebox ADC channels : An imec Onebox can record from several probes, each of which is a stream, and it can record several analog and digital non-neural channels at ~30kHz, which we also regard as a stream. This gets its own obx file type. NI device : You can use a NI multifunction/multichannel device to record your non-neural analog and digital (TTL) channels. You'll have several options for setting its sample rate. This is one stream. Actually SpikeGLX lets you run two NI devices of the same model together, one master and one slave, so that they share a common clock, and are thus recorded and treated as a single stream with double the channel capacity. Problem : Generally, data streams each have their own clock, hence, their own nominal sample rate, and run asynchronously. Moreover, sample clock rates will vary with temperature. This makes it necessary and challenging to synchronize (align) events acquired in different streams. Solution : SpikeGLX (plus companion tools CatGT and TPrime ) provide a reliable means of aligning data to sub-millisecond accuracy. Note that the SpikeGLX \"alignment\" process does not entail any resampling or editing of the raw acquired data. Rather it is a scheme for mapping post-analysis event times (seconds, not samples) from one coordinate system to another. This mapping scheme is implemented as follows. A common 1 Hz square wave is recorded in one channel of each data stream throughout the experiment. In offline processing, the rising edges in this \" sync wave \" are paired across streams A & B. Any event (T) occurring in B is no more than one second away from a nearest (preceding) sync wave edge (Eb) in stream B. That edge has a simultaneously occurring matching edge (Ea) in stream A. To map T in stream B to T' in stream A, we simply calculate: T' = T - Eb + Ea. Assuming we can correctly pair sync wave edges, the error on any mapped time is bounded by [1s * rate_error/rate]. For example, if the nominal probe sample rate is 30kHz and the error in that value is 3Hz, then the error in the mapped time would be 0.1ms. Rate error arises when we do not know the actual clock rate. The two largest sources of error are (1) bad/unknown calibration (the largest difference from 30kHz we've seen post calibration is 1Hz), and (2) temperature variation, which we measure to be very small near room temperature: < 0.01Hz/5C. So mapping errors after application of TPrime are typically smaller than 0.1ms. Briefly, the sync-related roles of various components are the following, listed in the order you would organize your workflow: SpikeGLX : Calibrate sample rates Recalibrate rates from run Generate and record runtime sync wave CatGT : Extract tables of sync wave edges Extract tables of non-neural event times Your_favorite_spike_sorter : Extract tables of spike times TPrime : Remap all tables of times to reference stream coordinates The remaining sections cover some how-to tips.","title":"Overview"},{"location":"help/syncEdges/Sync_edges/#spikeglx-clock-calibration","text":"","title":"SpikeGLX: Clock calibration"},{"location":"help/syncEdges/Sync_edges/#do-i-need-it","text":"Calibrating your clocks is useful for these reasons: It's a test of headstage health. The measured rate shouldn't be more than 1Hz different than 30kHz, and if you repeat the measurement, it should remain stable to < 0.1Hz. TPrime should also be used if you plan to publish claims about timing. But if you are just browsing in the FileViewer or eyeballing PSTH plots to roughly see how things line up without the bother of running TPrime, that will work better if all clocks are at least calibrated. TPrime needs to be able to identify pairs of matching edges. If the recorded times of edges in the sync wave are a second or more off, the adjustment may suffer phase error. This could be a problem in a long run where error is cumulative. To estimate the duration, consider that an uncalibrated clock could run as much as 1Hz differently than 30kHz. Then a problem will occur at time T, where 1Hz * T = 30000 or T = 8.3 hours.","title":"Do I need it?"},{"location":"help/syncEdges/Sync_edges/#how-to","text":"Using the Sync tab in the Configuration dialog, you: select a sync wave source specify for each stream which channels are getting sync wave input check Use next run for calibration (and select a run-length) This configures a special purpose run and does a post-run analysis to count how many samples are actually occurring between edges of the sync wave, and thereby deduces the true sample rate. It reports its results in a dialog for you to accept or reject. If accepted these become saved in a database and are used for subsequent runs of those hardware devices until you decide to do another calibration.","title":"How to"},{"location":"help/syncEdges/Sync_edges/#tips","text":"You probably don't need to calibrate a given device more than once, but you might as well get a good measurement for that one time. We recommend setting the calibration data collection time to 40 min .","title":"Tips"},{"location":"help/syncEdges/Sync_edges/#spikeglx-recalibration","text":"","title":"SpikeGLX: Recalibration"},{"location":"help/syncEdges/Sync_edges/#conditions","text":"Even if you never calibrated your sample clocks before, you can still calibrate them after the fact from existing run data if: You were recording the sync wave in each stream you want to calibrate. The run is long enough to get a reasonable estimate, at least 20 min.","title":"Conditions"},{"location":"help/syncEdges/Sync_edges/#how-to_1","text":"To do this, choose item Sample Rates From Run from the Tools menu and follow the instructions in the dialog. As with a first-time calibration it will show you results that you can accept or not. If you accept you can further choose whether to edit this run's metadata, and whether to update the database and use the new rates going forward. The dialog won't let you select imec LF-band files because their time resolution is too low. Rather, select the partner AP-band file. Both AP and LF metadata will be updated together. Note that the LF rate is exactly 1/12 the AP rate.","title":"How to"},{"location":"help/syncEdges/Sync_edges/#spikeglx-run-with-sync","text":"","title":"SpikeGLX: Run with sync"},{"location":"help/syncEdges/Sync_edges/#how-to_2","text":"It's easy to do a run that records the sync waveform. Specify a source/generator of the common sync waveform. You have several options: Select any one of the imec slots. Select your NI multifunction I/O device (SpikeGLX programs its output). Use your own signal generator. Set it for 1 Hz and 50% duty cycle. Feed wires from the source to one channel in each stream. For the PXI based versions, all of the imec modules share the sync signal using the chassis backplane, so only one slot (module) needs a wire connected to its SMA connector, whether it is specified as input or output (source). So you connect a wire to just one (active) module, and all imec probes will automatically record the sync wave. If NI is the source, the Notes field indicates which output terminal to connect. Tell the Sync tab which channels you wired so SpikeGLX can locate the waveform in each stream. For NP 1.0 and later, this signal is hard wired to appear on bit #6 of the last 16-bit word in the stream, the SY channel.","title":"How to"},{"location":"help/syncEdges/Sync_edges/#file-t-zero-and-length","text":"When you are running with sync enabled on the Sync tab, whenever a file-writing trigger event occurs and a new set of files is started, SpikeGLX internally uses the edges to make sure that the files all start at a common wall time. Each file's metadata records the sample index number of the first sample in that file: firstSample . These samples are aligned to each other. Said another way, the files share a common T0. While long files are being written, their alignment may slowly degrade because they are running and recording according to their own clock rates. If the clocks have been calibrated this drift will be a bit smaller, but nothing happens during writing to \"reset\" the alignment. Doing that would entail interpolating or resampling of data, which we do not do. (Note that TPrime corrects times by referencing times to sync edges no matter how long the file is. It's effectively like getting periodic resets throughout the run.) The writing phase for a given set of files (given g, t index) ends when a stop event occurs. Perhaps a writing timer elapses, or a TTL trigger gets a stop signal, or you click the Disable or Stop button. Any such event stops all the streams and closes the files, but the \"right-hand-side\" or \"trailing edges\" of the files are not guaranteed to be perfectly aligned. The files are often quite close to being the same length (metadata item fileTimeSecs ), but this is not controlled.","title":"File T-zero and length"},{"location":"help/syncEdges/Sync_edges/#catgt-event-extraction","text":"CatGT can perform several post-processing jobs, singly or in combination: Concatenate a g/t-series of separate trial files (whence the name). Apply tshift, band-pass and CAR filters to neural channels. Edit out saturation artifacts. Extract tables of sync waveform edge times to drive TPrime. Extract tables of any other TTL event times to be aligned with spikes. The extraction features are discussed here.","title":"CatGT: Event extraction"},{"location":"help/syncEdges/Sync_edges/#general","text":"Starting with version 3.0, CatGT extracts sync edges from all streams by default, unless you specify the -no_auto_sync option (see below). There are five extractors for scanning and decoding nonneural data channels in any data stream. They differ in the data types they operate upon: xa: Finds positive pulses in any analog channel. xd: Finds positive pulses in any digital channel. xia: Finds inverted pulses in any analog channel. xid: Finds inverted pulses in any digital channel. bf: Decodes positive bitfields in any digital channel. The first three parameters of any extractor specify the stream-type, stream-index and channel (16-bit word) to operate on, E.g.: -xa= js,ip,word , <additional parameters>","title":"General"},{"location":"help/syncEdges/Sync_edges/#extractors-js-stream-type","text":"NI : js = 0 (any extractor). OB : js = 1 (any extractor). AP : js = 2 (only {xd, xid} are legal). Extractors do not work on LF files.","title":"Extractors js (stream-type):"},{"location":"help/syncEdges/Sync_edges/#extractors-ip-stream-index","text":"NI : ip = 0 (there is only one NI stream). OB : ip = 0 selects obx0, ip = 7 selects obx7, etc. AP : ip = 0 selects imec0, ip = 7 selects imec7, etc.","title":"Extractors ip (stream-index)"},{"location":"help/syncEdges/Sync_edges/#extractors-word","text":"Word is a zero-based channel index. It selects the 16-bit data word to process. word = -1, selects the last word in that stream. That's especially useful to specify the SY word at the end of a Onebox or probe stream. It may be helpful to review the organization of words and bits in data streams in the SpikeGLX User Manual .","title":"Extractors word"},{"location":"help/syncEdges/Sync_edges/#extractors-positive-pulse","text":"starts at low non-negative baseline (below threshold) has a leading/rising edge (crosses above threshold) (optionally) stays high/deflected for a given duration has a trailing/falling edge (crosses below threshold) The positive pulse extractors {xa, xd} make text files that report the times (seconds) of the leading edges of matched pulses.","title":"Extractors positive pulse"},{"location":"help/syncEdges/Sync_edges/#extractors-xa","text":"Following -xa=js,ip,word , these parameters are required: Primary threshold-1 (V). Optional more stringent threshold-2 (V). Milliseconds duration. If your signal looks like clean square pulses, set threshold-2 to be closer to baseline than threshold-1 to ignore the threshold-2 level and run more efficiently. For noisy signals or for non-square pulses set threshold-2 to be farther from baseline than theshold-1 to ensure pulses attain a desired deflection amplitude. Using two separate threshold levels allows detecting the earliest time that pulse departs from baseline (threshold-1) and separately testing that the deflection is great enough to be considered a real event and not noise (threshold-2).","title":"Extractors xa"},{"location":"help/syncEdges/Sync_edges/#extractors-xd","text":"Following -xd=js,ip,word , these parameters are required: Index of the bit in the word. Milliseconds duration.","title":"Extractors xd"},{"location":"help/syncEdges/Sync_edges/#extractors-both-xa-and-xd","text":"All indexing is zero-based. Milliseconds duration means the signal must remain deflected from baseline for that long. Milliseconds duration can be zero to specify detection of all leading edges regardless of pulse duration. Milliseconds duration default precision (tolerance) is +/- 20% . Default tolerance can be overridden by appending it in milliseconds as the last parameter for that extractor. Each extractor can have its own tolerance. E.g. -xd=js,ip,word,bit,100 seeks pulses with duration in default range [80,120] ms. E.g. -xd=js,ip,word,bit,100,2 seeks pulses with duration in specified range [98,102] ms. A given channel or even bit could encode two or more types of pulse that have different durations, E.g. -xd=0,0,8,0,10 -xd=0,0,8,0,20 scans and reports both 10 and 20 ms pulses on the same line. Each option, say -xd=2,0,384,6,500 , creates an output file whose name reflects the parameters, e.g., run_name_g0_tcat.imec0.ap.xd_384_6_500.txt . The threshold is not encoded in the -xa filename; just word and milliseconds. The run_name_g0_fyi.txt file lists the full paths of all generated extraction files. The files report the times (s) of leading edges of detected pulses; one time per line, \\n line endings. The time is relative to the start of the stream in which the pulse is detected (native time).","title":"Extractors both xa and xd"},{"location":"help/syncEdges/Sync_edges/#extractors-inverted-pulse","text":"starts at high positive baseline (above threshold) has a leading/falling edge (crosses below threshold) (optionally) stays low/deflected for a given duration has a trailing/rising edge (crosses above threshold) Although the shape is \"inverted,\" these pulses are nevertheless entirely non-negative. The inverted pulse extractors {xia, xid} make text files that report the times (seconds) of the leading edges of matched pulses. The inverted pulse versions work exactly the same way as their positive counterparts. Just keep in mind that inverted pulses have a high baseline level and deflect toward lower values.","title":"Extractors inverted pulse"},{"location":"help/syncEdges/Sync_edges/#extractors-bf-bit-field","text":"The -xd and -xid options treat each bit of a digital word as an individual line. In contrast, the -bf option interprets a contiguous group of bits as a non-negative n-bit binary number. The -bf extractor reports value transitions: the newest value and the time it changed, in two separate files. Following -xa=js,ip,word , the parameters are: startbit : lowest order bit included in group (range [0..15]), nbits : how many bits belong to group (range [1..<16-startbit>]). inarow : a real value has to persist this many samples in a row (1 or higher). In the following examples we set inarow=3: To interpret all 16 bits of NI word 5 as a number, set -bf=0,0,5,0,16,3. To interpret the high-byte as a number, set -bf=0,0,5,8,8,3. To interpret bits {3,4,5,6} as a four-bit value, set -bf=0,0,5,3,4,3. You can specify multiple -bf options on the same command line. The words and bits can overlap. Each -bf option generates two output files, named according to the parameters (excluding inarow), for example: run_name_g0_tcat.nidq.bfv_5_3_4.txt . run_name_g0_tcat.nidq.bft_5_3_4.txt , The two files have paired entries. The bfv file contains the decoded values, and the bft file contains the time (seconds from file start) that the field switched to that value.","title":"Extractors bf (bit-field)"},{"location":"help/syncEdges/Sync_edges/#extractors-no_auto_sync-option","text":"Starting with version 3.0, CatGT automatically extracts sync edges from all streams unless you turn that off using -no_auto_sync . For an NI stream, CatGT reads the metadata to see which analog or digital word contains the sync waveform and builds the corresponding extractor for you, either -xa=0,0,word,thresh,0,500 or -xd=0,0,word,bit,500 . For OB and AP streams, CatGT seeks edges in bit #6 of the SY word, as if you had specified -xd=1,ip,-1,6,500 and/or -xd=2,ip,-1,6,500 .","title":"Extractors no_auto_sync option"},{"location":"help/syncEdges/Sync_edges/#tprime-remapping","text":"","title":"TPrime: Remapping"},{"location":"help/syncEdges/Sync_edges/#general_1","text":"After recording, spike sorting, TTL extraction...Now you need to convert all these times from the native timelines of the data streams in which they were measured to a common reference timeline. That's the only way you can compare them! That's what TPrime does. TPrime uses three types of files: tostream : The reference stream we will map to. It is defined by a file of sync wave edges as extracted by CatGT. There is only one of these. fromstream : A native stream we will map from. There can be several of these. A fromstream is identified by a file of sync wave edges extracted by CatGT, and, an arbitrary positive integer that is a shorthand for that stream, just so you don't have to type the edge-file-path over and over. events file : These are times you want to convert. Typically you will have a different file for every event class, such as all the spikes from probe zero, or all the nose_poke times from the NI stream. On the command line for each such file you will specify the stream index for the matching fromstream, an input file of native times, a new file path for the output times.","title":"General"},{"location":"help/syncEdges/Sync_edges/#events-files","text":"Key specs for events files: Input and output file type can be .txt or .npy (Kilosort). You can mix types: txt in, npy out, etc. Times are seconds, they are not sample numbers . Times are relative to the start of the file. Times are in ascending order.","title":"Events files"},{"location":"help/syncEdges/Sync_edges/#worked-example","text":"","title":"Worked example"},{"location":"help/syncEdges/Sync_edges/#outline","text":"Here we'll show actual command lines for CatGT and TPrime. We'll use a very simple contrived experiment for concreteness. Two probes {0,1}. Two non-neural NI signals {go_cue, nose_poke}.","title":"Outline"},{"location":"help/syncEdges/Sync_edges/#spikeglx-settings","text":"We focus here on SpikeGLX settings relevant to the CatGT/TPrime command lines... Imec Setup tab: (probe 0) :: Save chans : 0-49,200-249,768 ; 2 blocks of 50 channels + SY (probe 1) :: Save chans : all NI Setup tab: Primary device :: XA box: 0 ; go_cue as analog just to demonstrate Primary device :: XD box: 2,3 ; 2=nose_poke, 3=sync Common analog :: AI range : -5, 5 Maps :: Channels to save : all Sync tab: Square wave source :: Imec slot 3 Inputs :: Nidq : Digital bit, 3 Triggers tab Trigger mode : Immediate start ; single file, record upon button press Save tab: Run naming :: Data directory :: D:/Data Run naming :: Run name : demo Run naming :: Folder per probe : checked","title":"SpikeGLX settings"},{"location":"help/syncEdges/Sync_edges/#spikeglx-output","text":"D:/data/ ; data folder demo/ ; run folder demo_g0_imec0/ ; probe folder demo_g0_t0.imec0.ap.bin demo_g0_t0.imec0.ap.meta demo_g0_t0.imec0.lf.bin demo_g0_t0.imec0.lf.meta demo_g0_imec1/ ; probe folder demo_g0_t0.imec1.ap.bin demo_g0_t0.imec1.ap.meta demo_g0_t0.imec1.lf.bin demo_g0_t0.imec1.lf.meta demo_g0_t0.nidq.bin ; ni at top of run folder demo_g0_t0.nidq.meta","title":"SpikeGLX output"},{"location":"help/syncEdges/Sync_edges/#catgt-command-line","text":"I broke the line into several groups using continuation characters (^) but doing so is aesthetic only. The comments (;) must not appear in real commands. IMPORTANT : In real command lines there should be NO extra spaces inserted into the text of options, NOR following a caret (^) character. > CatGT ^ -dir=D:/data -run=demo -prb_fld ^ ; run naming -g=0 -t=0,0 ^ ; g and t range -ap -prb=0,1 -ni ^ ; which streams -apfilter=butter,12,300,9000 ^ ; filters -xa=0,0,0,1.1,0,25 ^ ; go_cue = 25 ms square pulse -xd=0,0,1,2,0 ^ ; nose_poke duration unknown -dest=D:/CGT_OUT ^ ; let's put output in new place -out_prb_fld ; and use an output folder per probe","title":"CatGT command line"},{"location":"help/syncEdges/Sync_edges/#catgt-output","text":"D:/CGT_OUT/ ; master output folder catgt_demo_g0/ ; run output folder demo_g0_imec0/ ; probe folder demo_g0_tcat.imec0.ap.bin ; filtered data for KS2 demo_g0_tcat.imec0.ap.meta demo_g0_tcat.imec0.ap.xd_100_6_500.txt ; sync edges demo_g0_imec1/ ; probe folder demo_g0_tcat.imec1.ap.bin ; filtered data for KS2 demo_g0_tcat.imec1.ap.meta demo_g0_tcat.imec1.ap.xd_384_6_500.txt ; sync edges demo_g0_tcat.nidq.xa_0_25.txt ; go_cue demo_g0_tcat.nidq.xd_1_2_0.txt ; nose_poke demo_g0_tcat.nidq.xd_1_3_500.txt ; sync edges","title":"CatGT output"},{"location":"help/syncEdges/Sync_edges/#kilosort-2-output","text":"Suppose we tell KS2 to put its output into the same folders as the CatGT output. Of course we run KS2 once for each probe. The output from KS2 is then: D:/CGT_OUT/ ; master output folder catgt_demo_g0/ ; run output folder demo_g0_imec0/ ; probe folder amplitudes.npy channel_map.npy ... spike_times.npy ; this is in samples ... whitening_mat_inv.npy demo_g0_imec1/ ; probe folder amplitudes.npy channel_map.npy ... spike_times.npy ; this is in samples ... whitening_mat_inv.npy","title":"Kilosort 2 output"},{"location":"help/syncEdges/Sync_edges/#samples-to-times","text":"Most spike sorters report spike times as sample indices so we'll need our own mini program to convert those to times in seconds. The program: Loads array spike_times.npy . Parses value imSampRate from the metadata file. Divides the rate into each array element. Writes the times out in same folder as spike_seconds.npy . Metadata parsers are available here . IMPORTANT: npy files usually store the values as doubles which preserves full numeric precision. Whenever you are saving clock rates or event times as text, be sure to write the values to microsecond-level precision. Keep six digits in the fractional part.","title":"Samples to times"},{"location":"help/syncEdges/Sync_edges/#tprime-command-line","text":"Let's map all times to probe-0: > TPrime -syncperiod=1.0 ^ -tostream=D:/CGT_OUT/catgt_demo_g0/demo_g0_imec0/demo_g0_tcat.imec0.ap.xd_100_6_500.txt ^ -fromstream=1,D:/CGT_OUT/catgt_demo_g0/demo_g0_imec1/demo_g0_tcat.imec1.ap.xd_384_6_500.txt ^ -fromstream=2,D:/CGT_OUT/catgt_demo_g0/demo_g0_tcat.nidq.xd_1_3_500.txt ^ -events=1,D:/CGT_OUT/catgt_demo_g0/demo_g0_imec1/spike_seconds.npy,D:/CGT_OUT/catgt_demo_g0/demo_g0_imec1/spike_seconds_adj.npy ^ -events=2,D:/CGT_OUT/catgt_demo_g0/demo_g0_tcat.nidq.xa_0_25.txt,D:/CGT_OUT/catgt_demo_g0/go_cue.txt ^ -events=2,D:/CGT_OUT/catgt_demo_g0/demo_g0_tcat.nidq.xd_1_2_0.txt,D:/CGT_OUT/catgt_demo_g0/nose_poke.txt","title":"TPrime command line"},{"location":"help/syncEdges/Sync_edges/#scripted-pipeline","text":"It can be daunting to get all these command lines correct. You might want to check out Jennifer Colonell's version of the Allen Institute ecephys_spike_sorting pipeline. This Python script-driven pipeline chains together: CatGT, KS2, Noise Cluster Tagging, C_Waves, QC metrics, TPrime. It's been tested a lot here at Janelia and several other institutions. fin","title":"Scripted pipeline"}]}